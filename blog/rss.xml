


















    
        
    

    
        

        
            
        
    




<?xml version="1.0" encoding="utf-8"?>

<rss version="2.0"  xml:lang="en-us"  xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        
            <copyright>© Clint McGuire 2009-2023</copyright>
        

        

        
            <language>en-us</language>
        

        
            <lastBuildDate>Fri, 21 Mar 2025 07:36:07 PDT</lastBuildDate>
        

        
            <link>http://localhost:1313/blog/</link>
        

        
            <atom:link href="http://localhost:1313/blog/rss.xml" hreflang="en-us" rel="self" type="application/rss+xml"/>
        

        
            

            <atom:link href="http://localhost:1313/blog/" hreflang="en-us" rel="alternate" type="text/html"/>
        
            

            <atom:link href="http://localhost:1313/blog/rss.xml" hreflang="en-us" rel="alternate" type="application/rss+xml"/>
        

        

        

        
            <title>Blog · Website of Clint McGuire</title>
        

        

        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=header><a class="text-body text-decoration-none" href=#header>Header</a></h2>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2025-03-21:/blog/cybersecurity-precepts-overview/</guid>
                    

                    
                        <link>http://localhost:1313/blog/cybersecurity-precepts-overview/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/cybersecurity-precepts-overview/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Fri, 21 Mar 2025 07:36:07 PDT</pubDate>
                    

                    
                        <title>Cybersecurity Precepts Overview</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=how-it-all-began><a class="text-body text-decoration-none" href=#how-it-all-began>How it all began</a></h2><p>As I mentioned <a href=https://www.clintmcguire.com/blog/how-i-use-obsidian/ rel=external>here</a>
, I&rsquo;ve tried many different productivity tools for keeping myself organized at work but I&rsquo;ve settled on Obsidian.<br>It was going to be a demo for a co-worker.<br>I started very simple, a note for each day, using the Daily Note plugin - no template, just a blank space where I put the various projects names and a line or two about status.
I probably had the Calendar plugin installed - because it makes it easier to work with the Daily Note and I like having the calendar on the screen.<br>I probably had two notes named after clients - so I could use wiki links - and one or two notes for Projects.
I gave the demo, explained how easy it was to work with and the potential benefits - I made a new daily note during our demo and added more data, I showed some basic markdown, all the typical demo things.
Later I did the same demo for one of our Service Delivery Managers.<br>When I was going through it the second time I realized I should probably use it for myself.</p><p>In the intervening months I&rsquo;ve added more a template and built additional workflows - I&rsquo;ve also expanded the use.</p><h2 class=h6 id=today><a class="text-body text-decoration-none" href=#today>Today</a></h2><p>I now use Obsidian to track my daily tasks, I use it to record meeting notes, I use it to keep track of thoughts for/prep for meetings that are going to happen, I track the time I spend on tasks/projects, I track project status (sort of).</p><h2 class=h6 id=daily-note><a class="text-body text-decoration-none" href=#daily-note>Daily Note</a></h2><p>Most of my time in Obsidian I am looking at the Daily Note for today. The today note has 3 main sections - Meetings, TODO and Scratch. In the meetings section I create a simple list of the meetings I have - start time, end time, client name, a couple words to remind me what the meeting is about.<br>In the TODO section I track all the tasks on my TODO list. I use the h1 header (<code>#</code>) for each client and list all the tasks/projects for that client below their name, using checkboxes (markdown for this below) to track the status.<br>The Scratch section is where I put notes for things I need some space to write, sometimes I will draft an email or a ticket update here - I don&rsquo;t actually use it that much, but I keep it around.</p><h2 class=h6 id=workflow><a class="text-body text-decoration-none" href=#workflow>Workflow</a></h2><p>In the morning I create the new today note, then I copy the content from yesterday&rsquo;s TODO section into today&rsquo;s. I will then spend some time checking that I&rsquo;ve got times entries in our ticket system for all the tasks/projects I worked on yesterday. Any items that I completed yesterday I delete from the today note, they will continue to exist in yesterday&rsquo;s note. Things that were partially completed yesterday will stay in today&rsquo;s note, so I can work on them more today or tomorrow - this keeps things on my TODO list, so I don&rsquo;t forget about them.
Once I&rsquo;ve cleaned up the today note I go to my calendar and add my meetings to the meetings section - as explained above. Our team has a daily stand up meeting every morning at the same time, so I have added that to the template - that way I don&rsquo;t have to manually re-type that every day.<br>After I&rsquo;ve made the list of meetings, in the TODO section I add another line under each client for the upcoming meeting, so I have an entry for time keeping later.</p><p>As I mentioned above I keep track of the status of tasks by using checkboxes - Obsidian (if not Markdown) will create a checkbox, if you start a line with <code>- [ ]</code>. When a task is done, put an <code>x</code> in the box and it is complete <code>- [x]</code>. The theme that I use in Obsidian for this vault is called <a href=https://github.com/kepano/obsidian-minimal rel=external>Minimal</a>
and has additional icons for checkboxes - if I put a <code>/</code> in the checkbox it will display the checkbox as half filled - I use this when I start working on something; if I put a <code>></code> in the box it will change the checkbox to an arrow icon - I use this if I&rsquo;m delegating a task; if I put a <code>&lt;</code> in the box it changes the checkbox to to a calendar icon - I use this if I&rsquo;ve scheduled the task in the future.</p><p>During the day, as I work on a task I mark the check box half-filled and put the start time at the end of the line. When I finish something, I put the end time at the end of the line and mark the check box as complete.
If something else comes up before I finish - a meeting is starting or someone has asked me to work on something else - then I put in the time I stop working on that task, when I come back to the task I&rsquo;ll use a semi-colon <code>;</code> to separate time entries.</p><pre tabindex=0><code>- [x] Meeting with client - 1330 - 1400
- [/] Security Audit - 1300 - 1330; 1400 - 1500</code></pre><h2 class=h6 id=tracking-meetings><a class="text-body text-decoration-none" href=#tracking-meetings>Tracking Meetings</a></h2><p>Meeting notes can go in two different places.</p><ol><li>Added in the Daily Note TODO under the line item for the meeting - I write minutes as we talk - this is where notes go for a Project or Client item.</li><li>If I&rsquo;m speaking with a co-worker, I may put the meeting notes on a note I&rsquo;ve created for them.<br>Where the notes go depends on what I have open in Obsidian when the meeting starts, more than a grand strategy - this could get very complicated so I don&rsquo;t have rules around it - I am trying to be time efficient, I need to keep some notes, so I put the notes where it is convenient and I can fix it after the meeting, I can move them or I can copy them to the other location, tryting to keep things simple and efficient.<br>If I think of something I need to talk to someone about, I will add it to my note for them, under a heading &ldquo;FOR NEXT CALL&rdquo;, then when we have that call, I can check the note for anything I&rsquo;ve written down.</li></ol><h2 class=h6 id=tracking-projects---sort-of><a class="text-body text-decoration-none" href=#tracking-projects---sort-of>Tracking Projects - sort of</a></h2><p>I mentioned that I sort of use Obsidian for Project tracking - we have other tools that we use for projects, I don&rsquo;t want to re-create those tools or duplicate the work by keeping things up to date in more than one place. But I do keep some details about my projects in Obsidian too. I create a project note and I put some high-level details about the project in that note, it is mostly just a reference point. I use this to keep track of the projects that I&rsquo;ve worked on - for reference - and so I can use the project name as a heading in my daily note. Under the TODO section I put an h1 tag in for the Client name, then I put an h2 tag in and wiki link to the project name.<br>The formatting looks like this:</p><pre tabindex=0><code># Client Name
## [[Project Name]]</code></pre><p>Below Project Name I put checkboxes for the items I need to work on that day - I update them day to day.</p><h2 class=h6 id=conclusion><a class="text-body text-decoration-none" href=#conclusion>Conclusion</a></h2><p>I&rsquo;ve built a task management, project tracking, mini-CRM, time tracking app out of a blank page, with workflows around it to keep me organized and effective. I use a few plug-ins to assist and a theme that gives me some additional icons for checkboxes. The system is built to be low friction so I can get my work done and track the things that need to be done or have been done.
Obsidian is incredibly flexible. What will you use it for? What do you use it for?</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2023-08-15:/blog/how-i-work-with-obsidian/</guid>
                    

                    
                        <link>http://localhost:1313/blog/how-i-work-with-obsidian/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/how-i-work-with-obsidian/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Tue, 15 Aug 2023 07:49:25 PDT</pubDate>
                    

                    
                        <title>How I Work with Obsidian</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>As I mentioned <a href=https://www.clintmcguire.com/blog/how-i-use-obsidian/ rel=external>here</a>
, I use Obsidian to prepare for tests.<br>I have a simple process for preparing:</p><ol><li>Exam Prep note</li><li>Find study material sources</li><li>Create Topic Notes<ol><li>Gather data into Topic Notes<ol><li>Make content my own</li></ol></li></ol></li><li>Turn Topic Notes into slides</li><li>Review slides</li><li>Take practice tests</li><li>Add content to address weaknesses<ol><li>New notes specific to a part of the content/category</li></ol></li><li>Repeat steps 4, 5 & 6</li><li>Take exam</li><li>Consistency</li></ol><p>This process has worked for me - I’ve passed 100% of the tests I taken using this method, on my first attempt.</p><h2 class=h6 id=background><a class="text-body text-decoration-none" href=#background>Background</a></h2><p>This process has been developed over many years, I started using Obsidian to study for exams years ago, but around the end of 2022/beginning of 2023 it got a massive upgrade.<br>I stumbled into the process of using slides as part of preparing for the CISSP exam. Looking around for study material I came across the YouTube Channel <em>Inside Cloud and Security</em> with a <a href="https://www.youtube.com/playlist?list=PL7XJSuT7Dq_XPK_qmYMqfiBjbtHJRWigD" rel=external>playlist that covers the CISSP exam</a>
. After taking notes on a few of the Domains, in Obsidian, I started to look at the other videos in the play list, to give myself a bit of break one study session.<br>In one of the videos the host mentioned that he used a slide deck to prepare for his test - reviewing his slides to memorize the content. I thought about this for a bit and realized that using slides would probably work for me too - but my content was in Obsidian, not in PowerPoint. I spent a bit of time trying to convert my Obsidian notes into a slide deck in PowerPoint - but gave up on that approach as it appeared I would have to manually copy and paste everything over.</p><h2 class=h6 id=obsidian-solution><a class="text-body text-decoration-none" href=#obsidian-solution>Obsidian Solution</a></h2><p>Luckily I found that someone had created a plugin for Obsidian that will turn a note file into a slide deck - <a href=https://github.com/MSzturc/obsidian-advanced-slides rel=external>Advanced Slides</a>
.<br>After installing the plugin, I was able to quickly update my CISSP notes to turn them into slides. This took some work to get them into a format that made sense as slides - I had to break each note into multiple slides, then I had to make sure that the markdown formatting was correct so that the content would display correctly.<br>The Advanced Slides plugin has a live preview feature in Obsidian, or you can launch the slides in a browser. I use the live preview to speed up the re-formatting and the browser for studying.<br>Once I figured out the various formatting tweaks that worked for me it was simple enough to keep that pattern going when I started preparing for the NSE7 and Azure Security exams I also took this year.<br>That’s the slide making process at some depth, but that isn’t the full extent of the process…</p><h2 class=h6 id=the-whole-process><a class="text-body text-decoration-none" href=#the-whole-process>The Whole Process</a></h2><p>When I decide to take an exam I create an Exam Prep note, it becomes the central hub for all the content related to that exam. This is where I want to gather all materials related to the exam that I can - a link to the main page for the exam, web pages with study material, links to YouTube videos\playlists, links to practice tests, links to books related to the content, etc. By the end of my process, the Exam Prep Note becomes the Table of Contents for everything to do with that test.<br>The exam writers list the topics covered in the exam - I take that list and put it into my Exam Prep note, too.<br>For the CISSP exam, there are 8 Domains covered, so those got listed. I then created a Topic Note for each Domain and started populated those.<br>I filled in each Topic Note with content from the Official Study Guide and content from YouTube - link above. But each entry must be in my own words - I can’t copy and paste. If I copy and paste the content, it doesn’t stick in my head when I review it later. Forcing myself to write something in my own words adds to my prep time, I often find I must go look up another source to get someone else’s take on the material before I can write my own notes about it. For the CISSP this was a fair bit of bouncing between YouTube and the Official Study guide, for the AZ-500 exam it was bouncing between the Online Learning Paths and the MS documentation for the specific features. Sometimes I’d go looking for a third or even a fourth source - so that when I put the note content in there, I know that I’ve got a correct representation of the idea\technology\item, because I’m going to be reviewing my notes repeatedly - I don’t want to hammer the wrong answer into my head.<br>Once I’ve got the details for a topic note together, I need to turn it into a Slide. Covered above.<br>When my slides look good, it’s time to review them. What I generally do, is start the review process after I’ve got a few of the Topic Notes done - for the CISSP I think I started reviewing after I had finished the 3rd or 4th Domain’s topic note.<br>I schedule study time every morning, and I rarely missed. I use this time to create notes, format the slides and review the slides - but one or two evening a week I would add a formatting or slide review session. I find that I am better at creating new notes in the morning, which requires more creativity. I can fix the formatting at night, because it is generally formulaic and a simple problem to solve. I suspect there is some additional benefit to reviewing the slides at night, too.<br>After I’ve reviewed the content multiple times I will take a practice test, if available - so far this year I’ve been able to do this.<br>The practice test tells me where I need to focus more. This may be more slide review time or I’ve missed some of the content or I need to address specific content differently. For the CISSP exam I created additional topic notes specific to the Risk Analysis Formulas and Risk Management Frameworks, plus a couple others, so I could review those independently of the rest of the content, because I needed to spend more time reviewing those specific items.<br>Once I’ve gathered the data I think I need to address the weakness(es), I review it a few times, then take another practice test and see how I do. If required, I repeat this process to fill in more gaps.<br>I’d like to say that at this point I feel totally confident before I take the test - but that has not been the case recently. What has happened is my exam has been scheduled and I go write it because I don’t want to move the date. By this point in the process I’ve spent weeks or months preparing, I’ve reviewed my notes many many times and I’ve done well on practices tests - so I should be prepared, but I still feel nervous about taking the exam.<br>I touched on it earlier, but I feel it deserves a second mention, a large part of my success is that I have been very very consistent with my preparation. When I have been preparing for these exams, I have studied nearly every morning of the week - my goal was to study 7 days a week, but I missed a day here and there occasionally. I believe the daily consistency has been an important factor, by working with the concepts, ideas, technologies, nearly every morning I’ve kept it top of mind.</p><h2 class=h6 id=conclusion><a class="text-body text-decoration-none" href=#conclusion>Conclusion</a></h2><p>While I can’t discount luck as being a factor in passing the exams I’ve taken this year - I can say that this process has helped. Following this approach consistently, reviewing the material, creating notes in my own words, using practices tests and gathering material from multiple sources seems the best available option for preparing for an exam for me.</p><p>Good luck with your exams!</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2023-08-11:/blog/how-i-study-with-obsidian/</guid>
                    

                    
                        <link>http://localhost:1313/blog/how-i-study-with-obsidian/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/how-i-study-with-obsidian/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Fri, 11 Aug 2023 07:56:21 PDT</pubDate>
                    

                    
                        <title>How I Study with Obsidian</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=background><a class="text-body text-decoration-none" href=#background>Background</a></h2><p>I have been using Obsidian since 2021 to take notes and keep myself organized. Over that time, my use of Obsidian has expanded and now it is critical to my daily workflow, for my work, my personal and professional development and my physical and mental health.</p><p>Obsidian allows me to keep technical notes, study for test and organize my thoughts.</p><p>Obsidian helps me track my personal goals and development.</p><p>Obsidian helps me keep on top of my work projects and tasks. I am more effective at my job and better prepared since I started to use Obsidian as part of my daily workflow.</p><h2 class=h6 id=how-i-have-improved-because-of-obsidian><a class="text-body text-decoration-none" href=#how-i-have-improved-because-of-obsidian>How I have improved because of Obsidian</a></h2><p>Obsidian was critical to my preparation for and passing of the CISSP, NSE7 and Azure Security Engineer Associate exams that I’ve taken in 2023. I passed these 3 exams in March, May and August respectively - and I would not have been able to do that in the same timeframe without Obsidian.</p><p>I work as a consultant, I am always working with multiple clients, that means I have a constantly fluctuating task list - from big projects to minor requests - that need to be tracked, actions taken, items delegated, and statuses followed up on. Before I started using Obsidian for managing my workflow I had tried other task software - online task trackers, wiki-based interfaces, Kanban style trackers, I think I’ve tried nearly everything out there over the last 15+ years. But after trying them for a few weeks, I always went back to a plain paper notebook.</p><p>Every other tool had some great features, but as a consultant I need to be able to track my time, in addition to status and next actions. Time tracking was never a built-in feature of any of the apps I tried, but it was always a thing I could write down in my notebook.</p><p>Obsidian helps me track my tasks and my time, just like a notebook has, but it’s even better - because I can keep a “daily note” and copy and paste yesterday’s details into today’s note, then remove the items that don’t need to be brought forward and add new items that come up.</p><p>I use Obsidian to track my progress towards goals and keep track of the habits I’m looking to maintain or develop. I maintain a gratitude journal in Obsidian. I track my daily caloric burn, if I went to the gym, did I get to bed before a specific time to make sure I’m getting enough sleep, so that I keep making progress towards my health and strength goals. I track if I went to the driving range, journaled, and meditated to keep my mental health up.</p><h2 class=h6 id=the-technical-bits><a class="text-body text-decoration-none" href=#the-technical-bits>The Technical Bits</a></h2><p>I’m able to do all this with Obsidian because of two main features</p><ol><li>the contents of Obsidian are just text files and</li><li>the application is extensible via plugins.</li></ol><p>The text file structure is important because it doesn’t apply any silly constraints like the size of a piece of paper and text files also allow for easy formatting using Markdown syntax - which is quick to add and flexible.</p><p>The plugin support extends the application to increase the functionality - for example there is a built in Template plug in, it works well for populating a new note with simple content. However, Obsidian also supports community developed plugins - like the Templater plugin, which I use because it provides additional options. There are a few other plugins that I’m using currently.</p><h2 class=h6 id=conclusion><a class="text-body text-decoration-none" href=#conclusion>Conclusion</a></h2><p>Reflecting on my last 2 or so years of using Obsidian to write this has been an interesting process. I have been self-motivated to achieve goals and improve for a long time, but adding the structure that Obsidian helps me provide to myself has accelerated my progress by helping me stay focused on the things I’m working on for longer so that my progress continues to build on itself. That compounding improvement has spread to so many parts of my life. I haven’t come across a similar tool that could so easily slot into so many parts of my life and provide such a huge payback.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2023-08-03:/blog/how-i-use-obsidian/</guid>
                    

                    
                        <link>http://localhost:1313/blog/how-i-use-obsidian/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/how-i-use-obsidian/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Thu, 03 Aug 2023 07:48:22 PDT</pubDate>
                    

                    
                        <title>Obsidian</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>After a few months of preparation and practice exams, I&rsquo;m happy to report that I&rsquo;ve passed the AZ-500 Exam.<br><a href="https://learn.microsoft.com/api/credentials/share/en-ca/ClintMcGuire-6169/8D1573250504B569?sharingId=6505D259B91DCAD7" rel=external>https://learn.microsoft.com/api/credentials/share/en-ca/ClintMcGuire-6169/8D1573250504B569?sharingId=6505D259B91DCAD7</a></p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2023-07-14:/blog/azuresecurityengineerassociate/</guid>
                    

                    
                        <link>http://localhost:1313/blog/azuresecurityengineerassociate/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/azuresecurityengineerassociate/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Fri, 14 Jul 2023 21:34:32 PDT</pubDate>
                    

                    
                        <title>Azure Security Engineer Associate</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>After a couple months of studying, I&rsquo;m happy to report that I&rsquo;ve passed Fortinet&rsquo;s NSE7 SD-WAN test, renewing my NSE certifications.<br>I hold the following certifications from Fortinet:<br>Network Security Professional - NSE4<br>Network Security Analyst - NSE5<br>Network Security Architect - NSE7</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2023-05-26:/blog/nse7/</guid>
                    

                    
                        <link>http://localhost:1313/blog/nse7/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/nse7/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Fri, 26 May 2023 21:32:50 PDT</pubDate>
                    

                    
                        <title>NSE7</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>After many months of study and preparation, I can happily say that I&rsquo;ve been awarded the CISSP designation.</p><p><a href=https://www.credly.com/badges/f31a048f-61fa-4e40-8575-7a763b535227/public_url rel=external>https://www.credly.com/badges/f31a048f-61fa-4e40-8575-7a763b535227/public_url</a><br><img src=http://localhost:1313/cissp.png alt=Certificate></p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2023-04-16:/blog/cissp/</guid>
                    

                    
                        <link>http://localhost:1313/blog/cissp/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/cissp/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sun, 16 Apr 2023 07:55:07 PDT</pubDate>
                    

                    
                        <title>CISSP</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=azure-certifications><a class="text-body text-decoration-none" href=#azure-certifications>Azure Certifications</a></h2><p><img src=http://localhost:1313/azure-solutions-architect-expert-600x600.png alt=Certificate></p><p>My plan for this year is to get 3 Azure certificates.
The first one on the list was the Azure Solution Architect Expert.
I already hold the Azure Fundamentals - AZ-104 - certification, so I only needed to complete the AZ-305 exam to get this cert.<br>This cert also tests against broad knowledge of many different parts of Azure, so going deep into any one area was not required.
Allowing me to learn the high-level functions/features/uses cases of the different components.</p><h2 class=h6 id=next><a class="text-body text-decoration-none" href=#next>Next!</a></h2><p>Next on the list is the Azure Security Technologies. I&rsquo;ve already started to dig into this. I&rsquo;ve worked with a few parts already - MFA and Conditional Access Policies for example - and security/identity were important to the Architect cert, so we can build on current knowledge.</p><p>After the security cert the aim is the Azure Network Engineer cert.
After that, I will review Azure cert options, see if there is anything else that interests me. Alternately, I&rsquo;m considering diving into AWS. It&rsquo;s been a minute since I did much on that platform, but I think it might be useful to revisit.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2022-03-13:/blog/azuresolutionarchitect/</guid>
                    

                    
                        <link>http://localhost:1313/blog/azuresolutionarchitect/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/azuresolutionarchitect/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sun, 13 Mar 2022 10:43:05 PDT</pubDate>
                    

                    
                        <title>Azure Solution Architect</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h5 id=how-to-improve-security-in-m365><a class="text-body text-decoration-none" href=#how-to-improve-security-in-m365>How to improve security in M365</a></h2><p>Microsoft has added a lot of security features to the M365 platform, but not all of them are available to all license levels.
If you are licensed for M365 Business Standard you won&rsquo;t have access to all the security features in the platform, so let&rsquo;s focus on what
is available to your tenant and review the Top 5.</p><ol><li>Setup multi-factor authentication for all users</li><li>Create dedicated admin accounts</li><li>Filter out commonly malicious attachments from email</li><li>Use mail flow rules to warn users about potentially dangerous attachments</li><li>Use mail flow rules to prevent auto-forwarding of email</li></ol><h2 class=h5 id=how-do-these-improve-security><a class="text-body text-decoration-none" href=#how-do-these-improve-security>How do these improve security?</a></h2><h3 class=h6 id=1-multi-factor-authentication><a class="text-body text-decoration-none" href=#1-multi-factor-authentication>1. Multi-factor Authentication</a></h3><p>Enabling multi-factor authentication (MFA) for all users adds an additional layer of security when your users login. Since all M365 is hosted in the cloud,
the only way to verify access is by username and password - unless you also have MFA enabled. Before organizations moved to M365, they would often have a
server in their office, with a firewall protecting the office network from the outside. Limiting who was able to talk to the server. Since M365 is on the
internet, everyone has access. If an attacker can guess your users&rsquo; usernames and passwords then they can get in.<br>Enabling MFA greatly complicates things for an attacker.</p><h3 class=h6 id=2-dedicated-admin-accounts><a class="text-body text-decoration-none" href=#2-dedicated-admin-accounts>2. Dedicated Admin Accounts</a></h3><p>Admin accounts have extra permissions and privileges, so if an admin user is tricked into opening a malicious email or clicking on a malicious link
it can have serious consequences for the business. One of the best ways to avoid this is to not have an email account for your admin accounts.
The same person opening a malicious email, but logged in as a regular user has a much smaller impact on the business - as this user shouldn&rsquo;t have the
full system administration power of a Global Admin account.</p><h3 class=h6 id=3-filter-out-commonly-malicious-attachments><a class="text-body text-decoration-none" href=#3-filter-out-commonly-malicious-attachments>3. Filter out commonly malicious attachments</a></h3><p>Preventing a malicious email from getting to your users will save them from having to identify that the email is malicious. Otherwise, it&rsquo;s up to the user
to figure out that the email is malicious. Ransomware gangs and Virus writers are constantly trying to improve their emails, to make them look more legitimate, so that
they get opened more often. Having rules filter out potentially malicious email attachments takes some of the burden off your users.</p><h3 class=h6 id=4-use-mail-flow-rules-to-warn-about-potentially-dangerous-attachments><a class="text-body text-decoration-none" href=#4-use-mail-flow-rules-to-warn-about-potentially-dangerous-attachments>4. Use mail flow rules to warn about potentially dangerous attachments</a></h3><p>Office Macros are very powerful. Viruses and ransomware can be spread by macros in office documents. Using mail flow rules in M365 you can add a warning to messages that
have attachments with macros. This warning will tell users that they need to be careful before they open the attachment.</p><h3 class=h6 id=5-use-mail-flow-rules-to-prevent-auto-forwarding-email><a class="text-body text-decoration-none" href=#5-use-mail-flow-rules-to-prevent-auto-forwarding-email>5. Use mail flow rules to prevent auto-forwarding email</a></h3><p>Business Email Compromise (BEC) attacks will often use auto-forwarding of emails to trick accounting staff into updating the payment information for legitimate
invoices, so that the attacker gets paid instead of the vendor. (If you are interested in seeing more on this, I&rsquo;ve written up a detailed post on <a href=https://www.clintmcguire.com/blog/bec/ rel=external>BEC</a>
.)
The mail flow rule will prevent this auto-forwarded email from going out, making this attack much harder.</p><h2 class=h5 id=which-should-you-do><a class="text-body text-decoration-none" href=#which-should-you-do>Which should you do?</a></h2><p>I recommend all of these.<br>Items 1, 2 and 3 would be my minimum recommendation. Items 3 and 4 might need a bit more investigation and discussion with users, to make sure the changes aren&rsquo;t going to
impact operations, but this is generally not too disruptive. Item 5 could be an issue if your business has a legitimate reason to use this feature, if that&rsquo;s the case I&rsquo;d
suggest discussing with the user(s) that have auto-forward setup and see if there is another way to solve the business need or replace the process, because reducing the risk of BEC attacks
is certainly worth the conversation. (The median BEC incident lead to a loss of $30,000 USD in 2021, it&rsquo;s worth talking to your users about preventing this.)</p><h2 class=h5 id=next-steps><a class="text-body text-decoration-none" href=#next-steps>Next Steps</a></h2><p>Microsoft has written up <a href="https://docs.microsoft.com/en-us/microsoft-365/admin/security-and-compliance/secure-your-business-data?view=o365-worldwide" rel=external>the steps for implementing these</a>
but their
numbering is a bit different from mine. I&rsquo;ve skipped over their #2, because, while certainly valid, it doesn&rsquo;t make use of M365 technology or features. So, their #3, is my #2. Their #4 is my #3, etc.
Their list also covers M365 Business Premium, but the features only available to the Premium license start at #7, so just stop at 6 if you are using Business Standard licensing.</p><p>If you need help with any of this drop a comment or look me up on <a href=https://www.linkedin.com/in/clintmcguire/ rel=external>LinkedIn</a></p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2022-02-21:/blog/five-tips-to-secure-m365-business-standard/</guid>
                    

                    
                        <link>http://localhost:1313/blog/five-tips-to-secure-m365-business-standard/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/five-tips-to-secure-m365-business-standard/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Mon, 21 Feb 2022 21:10:28 PST</pubDate>
                    

                    
                        <title>Five Tips to Secure M365 Business Standard</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h5 id=what-is-the-risk><a class="text-body text-decoration-none" href=#what-is-the-risk>What is the Risk?</a></h2><p>The risk is high.<br>The <a href=https://verizon.com/dbir/ rel=external>Verizon 2021 Data Breach Investigations Report</a>
lays out the statistics quite clearly. Comparing the three types of attacks - Business Email Compromise (BEC), Computer Data Breach (CDB) &ldquo;Hacking&rdquo; and Ransomware - there were 7 times the number of incidents of BEC. [BEC = 19,000; CDB = 2,780; Ransomware = 2,480]<br>While not all incidents ended with the victim losing money, BEC came in number one here again - having the most incidents leading to a loss.<br>The median loss to a BEC incident, reported by Verizon in 2021, was $30,000 USD. The FBI Internet Crime Complain Center (IC3.gov) reported over $1,800,000,000 USD in losses in 2020.</p><h2 class=h5 id=what-is-the-challenge><a class="text-body text-decoration-none" href=#what-is-the-challenge>What is the Challenge?</a></h2><p>BEC attacks - compared to CBD (Hacking) or Ransomware - are technologically unsophisticated. They tend to fall into two different approaches - Internal Impersonation & Changes to Vendor Details.<br>Internal Impersonation attacks come from an external email source, but try to convince the recipient that they are from another employee - usually CEO, CFO, Director of Finance, etc. They hope to leverage this impersonation to get money sent to the attacker.
Changing Vendor Detail attacks involve having the Accounts Payable team update the payment information for a valid vendor, so that legitimate invoices get paid to the attacker.</p><p>Let&rsquo;s review the Change Vendor Details Kill Chain.<br><a href=https://www.jpmorgan.com/content/dam/jpm/commercial-banking/insights/cybersecurity/defending-against-bec-toolkit-2021-v7.1.pdf rel=external>JP Morgan Chase</a>
lays out the kill chain for this attack quite nicely - Page 2 of the linked PDF if you&rsquo;d like to follow the graphic.<br>Step 1. An attacker gathers information on the target organization - from publicly available sources - to determine who in the organization to specifically target.<br>Step 2. A phishing email is sent to the specific person being targeted.<br>Steps 3 & 4. User clicks on something malicious in the email and their mailbox gets compromised.<br>Step 5. The attacker uses their newly gained access to create a mailbox rule that will forward messages with certain keywords to an email address they control.<br>Steps 6 & 7. A legitimate vendor sends and invoice, the invoice is forwarded to the attacker.<br>Steps 8 & 9. The attacker uses deception to convince the target to change the payment details for the vendor that sent this invoice.<br>Step 10. The target organization pays the attacker the value of the legitimate invoice.</p><p>As you can see, the Change Vendor Details attack relies mostly on deception, but does require some technical sophistication.</p><p>By comparison, the Internal Impersonation attack relies almost exclusively on deception - exploiting social engineering techniques to get an accounting team member to transfer funds (or buy gift cards) to an account the attacker controls.</p><h2 class=h5 id=how-do-we-prevent-bec><a class="text-body text-decoration-none" href=#how-do-we-prevent-bec>How do we Prevent BEC?</a></h2><p>The lower technical sophistication of these attacks provides opportunity for us to prevent these attacks with a mix of technical and non-technical responses.</p><h3 class=h6 id=non-technical-prevention><a class="text-body text-decoration-none" href=#non-technical-prevention>Non-technical Prevention</a></h3><p>These are policies, procedures and training. One policy, two procedures and cyber security awareness training.</p><p>We will start with policy first - because it also addresses the first step in both attacks.
The first step for the attacker is to use social media (LinkedIn, Facebook, etc.) to get details on your staff. In both attacks they are looking for the people that they are going target, specifically the AP team. In the Impersonation attack, they are also looking for the CEO or VP Finance, so they can impersonate them.<br>A policy restricting information about position and job function on social media will make it harder for attackers to target the AP team. For example, an AR team member would find if very suspicious if they got an email from the CEO requesting an emergency wire transfer, because it is outside the scope of their duties - and this knowledge would be available internally.</p><p>The two procedures that need to be in place are very applicable to these two attacks:</p><ol><li>Payment Authorization Process</li><li>Vendor Account Change Process</li></ol><p>The Payment Authorization Process needs to be clear on who can authorize payments and how it will be done and needs to be understood by all parties involved in the process. The specifics will be unique to your organization. Discuss this with your organization&rsquo;s Accounting/Finance department to determine a robust process, that won&rsquo;t grind the business to a halt, while still making it very hard for an impersonation attack to be successful.</p><p>For the Vendor Account Change Process JP Morgan recommend having an Authorization List with contact information for all vendors - names and phone numbers for the people at the vendor that can approve updates to the account details. Your AP team would be required to contact someone by phone, from this list and get the specific changes this way. An incoming call or email, under this process, initiates a callback from your organization to the designated people on your list. Updates to your list need to follow the same process.</p><p>Security Awareness Training - your AP team are targets. They need to understand that people are going to be targeting them. While you will probably have some/all of the technical responses we will talk about shortly in place, those aren&rsquo;t a guarantee, so the staff need to be familiar with the types of attacks that are coming.</p><h3 class=h6 id=technical-prevention><a class="text-body text-decoration-none" href=#technical-prevention>Technical Prevention</a></h3><p>Following the best practice of Defense in Depth, we need to take a multi-layered approach to dealing with BEC.<br>There are controls that need to be put in place at the edge of the network, scanning tools that need to be run against mailboxes, additional authentication and finally extra logging.
At the edge, we need to have email getting scanned for viruses in attachments and filtering based on common email &ldquo;hygiene&rdquo; features: SPF, DKIM and DMARC. (Your organization should have these in place, or a plan to implement them.) Incoming email should also be labelled - at the top of the content of the message - to indicate that it has come from an external source.<br>These controls will help reduce the number of attacks that make it into mailboxes and having the external label will make it easier for users to spot impersonation attempts.<br>Scanning all mailboxes for rules that forward email make it harder for attackers implement a Change Vendor Details attack.<br>Multi-Factor Authentication (MFA) can help reduce risk, as it makes it harder for attackers to compromise your systems.<br>Finally, extensive logging can help with remediation if an incident happens.</p><h2 class=h5 id=what-to-do-if-it-happens><a class="text-body text-decoration-none" href=#what-to-do-if-it-happens>What to do if it happens?</a></h2><p>If your organization has had an incident:<br>If you are in Canada</p><ul><li>Call your bank</li><li>Report the incident to the <a href=https://www.antifraudcentre-centreantifraude.ca/report-signalez-eng.htm#a1a rel=external>Anti-Fraud Center</a></li><li>Contact your local police (RCMP, etc.)</li></ul><p>If you are in the US</p><ul><li>Call your bank</li><li>Report the incident to the FBI <a href=https://IC3.gov rel=external>Internet Crime Complain Center</a></li><li>Report the incident to your local FBI field office & Local Police</li></ul><h3 class=h6 id=preparation><a class="text-body text-decoration-none" href=#preparation>Preparation</a></h3><p>Based on the prevalence and simplicity of these attacks, it seems likely that every organization will eventually be targeted. Beyond the Technical and Non-technical Prevention techniques discussed above there are four additional Preparation steps that should be performed.<br>Discuss this risk with your Legal Counsel, with your insurance team and with your Bank; additionally you can prepared by walking through a tabletop exerecise.</p><p>In my research for this article, I came across a blog post by the law frim <a href=https://www.faegredrinker.com/en/insights/publications/2020/9/business-email-compromise-scams-what-you-should-know-and-what-you-can-do-to-be-prepared rel=external>Faegre Drinker</a>
about how the courts assigned responsibility for losses in two different cases of Business Email Compromise. The two cases did not have responsibility assigned the same way. Review this with your legal team to see if you need additional controls or processes.</p><p>Talk to your insurance team to see if BEC is covered under any of your policies.</p><p>Pre-emptively call your bank and discuss their process for handling a BEC incident, document this process internally.</p><p>Run a tabletop exercise as a way to practice your process and evaluate it, it&rsquo;s better to see if you need to make changes in advance. Here is a <a href=https://cybersecurity.wa.gov/sites/default/files/public/OCS_content/Trainingexercises/021%2015-Minute%20Workgroup%20Tabletop%20Exercise.pdf rel=external>link</a>
to a tabletop scenario, similar to a BEC incident, that is a decent starting point.</p><h2 class=h5 id=conclusion><a class="text-body text-decoration-none" href=#conclusion>Conclusion</a></h2><p>Business Email Compromise attacks are common and having been generating large payouts for criminals. While Ransomware attacks are getting into headlines, BEC scams are quietly making money. These attacks are not overly sophisticated, which makes them easier for less technically skilled criminals. However, their lower technical requirements allow for a variety of preventions - technical and non-technical - that can be marshalled against these attacks. These attacks have been ongoing and persistent, your bank and insurance providers (are likely) very aware of them and have processes in place to deal with them. Law Enforcement in North America has been dealing with this problem and the judicial system appears to be starting to work through this issue.
How does your organization&rsquo;s preparation stack up compared to the preventions outlined above? Which are in place? Which need to be updated? Which need to be implemented?</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2022-02-04:/blog/bec/</guid>
                    

                    
                        <link>http://localhost:1313/blog/bec/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/bec/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Fri, 04 Feb 2022 07:44:38 PST</pubDate>
                    

                    
                        <title>BEC</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>Ransomware has evolved into a model known as Double Extortion. Before encrypting your data and holding it ransom, the criminals copy the data off your computers to their own, where they keep it as a hostage. If you choose to not pay the ransom they will expose the hostage copy of your data publicly on the internet. They use reputation risk and confidentiality requirements (either regulation or contractual) as a way to force the payment. Further, while they have a copy of your data, they are able to read your financials and insurance contracts so that they can set the maximum ransom. While there is a negotiation to determine the ransom, it is very one-sided.</p><p>In 2020, Verizon&rsquo;s Data Breach Investigations Report found that the Median Loss for a Ransomware attack - before the transition to the Double Extortion method - was $11,150, <a href=https://verizon.com/dbir/ rel=external>source</a>
. We expect this number to go up the next time it&rsquo;s reported.</p><p>Microsoft&rsquo;s Digital Defense Report published October 2021 show the Ransomware encounter rate doubled between 2018 and 2021, <a href=https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RWMFIi rel=external>source</a>
. This trend is also expected to continue going up.</p><p>The risk is real, the criminals are motivated and past successes for them means they have funding for more advanced attacks in the future.</p><p>The cash flow implications of a successful ransomware attack are significant - with crippled systems income will plummet. New orders won&rsquo;t be getting entered and existing orders won&rsquo;t be getting filled. At the same time the expenses will be escalating - the non-IT staff will be idle, external resources are likely required to supplement the IT staff in recovery, and the cost of the ransom, plus potential future losses due to reputation or customers going elsewhere. May all add up to a long cash flow crisis.</p><p>Has your C-Suite/Board been briefed on the potential cash flow risks from ransomware?<br>Where is your C-Suite&rsquo;s/Board&rsquo;s level of engagement with ransomware risk?</p><ul><li>Unaware</li><li>Aware but unconcerned</li><li>Aware and concerned</li><li>Budget allocated to projects to mitigate risk</li><li>Ransomware risk is a priority item</li></ul><p>Might be time to review the sources listed above and run these concerns up the chain&mldr;</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2021-12-06:/blog/existential-cash-flow-crisis-of-ransomware/</guid>
                    

                    
                        <link>http://localhost:1313/blog/existential-cash-flow-crisis-of-ransomware/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/existential-cash-flow-crisis-of-ransomware/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Mon, 06 Dec 2021 08:03:00 PST</pubDate>
                    

                    
                        <title>Existential Cash Flow Crisis of Ransomware</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>In the FortiSwitch Management, for Ports and Trunks, it shows Native VLAN and Allowed VLANs.
This was new terminology for me. Other switches I&rsquo;ve used in the past have had either Tagged or Untagged.</p><p>If you look in the CLI, you can also assign an Untagged VLAN to ports&mldr;</p><h3 class=h5 id=how-do-you-modify-the-vlans-in-the-gui><a class="text-body text-decoration-none" href=#how-do-you-modify-the-vlans-in-the-gui>How do you modify the VLANs in the GUI?</a></h3><p>Quick note, to change the VLAN in the GUI, find the port, put your mouse over the table cell for the port and VLAN type you want to change, then click the Pencil icon that will show up in the top right of the cell.<br>This will open a menu where you can select the new settings you want.</p><p>If you want to change multiple ports at the same time, you can use the Shift-Click, or the Control/Command-Click multiple select methods.
In case these terms are not familiar (I may have them wrong), to select a continuous range, click the first in the range, hold shift and click the last in the range. To select multiple, but not continuous, click the first port, hold Control (on Windows) or Command (on Mac) then click the next port, hold the keyboard button again and click the third, repeat until all required selections are made.</p><h3 class=h5 id=native-vlan><a class="text-body text-decoration-none" href=#native-vlan>Native VLAN</a></h3><p>This is sort of like Untagged.
As packets ingress into the switch, if they have no tag, the FortiSwitch assigns the Native VLAN as a tag.
As packets leave switch ports, if their tag matches the Native VLAN the packet is sent with out without a tag.
It takes untagged traffic, assigns it a tag, moves it through the network and potentially untags it.</p><h3 class=h5 id=allowed-vlan><a class="text-body text-decoration-none" href=#allowed-vlan>Allowed VLAN</a></h3><p>The Allowed VLANs are a list of VLAN IDs that the switch will accept (ingress) or transmit (egress) for that port.
The Native VLAN is on this list implicitly, so it doesn&rsquo;t need to be added.
This is like Tagged ports on another vendor&rsquo;s gear.</p><h4 class=h6 id=can-i-put-the-native-vlan-in-the-allowed-vlan-list><a class="text-body text-decoration-none" href=#can-i-put-the-native-vlan-in-the-allowed-vlan-list>Can I put the Native VLAN in the Allowed VLAN list?</a></h4><p>I&rsquo;ve tested this on 6.4.6 and 6.4.7 in the GUI - no. When modifying the Allowed VLAN list, it doesn&rsquo;t include the VLAN currently assigned as Native VLAN.</p><h3 class=h5 id=what-is-the-underlying-model-here><a class="text-body text-decoration-none" href=#what-is-the-underlying-model-here>What is the underlying model here?</a></h3><p>Here&rsquo;s my speculation - I don&rsquo;t think this is in the docs (I can&rsquo;t find it). The Fortinet VLAN model is that all packets should have a tag while they are moving through the FortiSwitches. This is why Untagged is hidden on the CLI and the Native VLAN tag gets added on ingress to untagged packets. Also, the Untagged VLAN option only applies on Egress.<br>I don&rsquo;t see anything wrong with having all packets tagged as they move through the switch, but this was new to me. I did the CCNA course a long, long time ago. I don&rsquo;t recall Native VLANs from it. I don&rsquo;t recall them coming up when I was prepping for the Brocade cert I took (merely a long time ago). It would have simplified my understanding of the terminology if this model had been presented first.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2021-11-03:/blog/fortiswitch-vlans/</guid>
                    

                    
                        <link>http://localhost:1313/blog/fortiswitch-vlans/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/fortiswitch-vlans/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Wed, 03 Nov 2021 07:35:48 PDT</pubDate>
                    

                    
                        <title>FortiSwitch VLANs</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=background><a class="text-body text-decoration-none" href=#background>Background</a></h2><p>In <a href=https://packetpushers.net/podcast/hs010-budgeting-for-cybersecurity/ rel=external>Heavy Strategy EP. 010 - Budgeting for Cybersecurity</a>
Greg Ferro & Johna Till Johnson agree that &ldquo;Detection is better than Prevention&rdquo;, in that same episode Greg said that he recommended SDP (Software-Defined Perimeter), Asset Inventory and EPP (Endpoint Protection Platform) for all devices.<br>SDP, Asset Inventory and EPP are protection technologies, so this could be seen as conflicting with &ldquo;detection is better&mldr;&rdquo;. However, I think what Greg is getting at is that there needs to be a minimum level of protection and that further spending on additional protection technologies is likely to be wasteful.
Nearly all organizations are going to have already spent some money on &ldquo;prevention tech&rdquo;, it&rsquo;s probably built into the network design.</p><h2 class=h6 id=so-what-is-the-security-baseline><a class="text-body text-decoration-none" href=#so-what-is-the-security-baseline>So, what is the Security Baseline?</a></h2><p>Greg provided 3 components as a starting point - SDP, Asset Inventory & EPP. I&rsquo;m going to agree with two but exclude one.<br>SDP is an interesting technology. It appears to be the Zero Trust approach Fortinet has adopted - and possibly others, I haven&rsquo;t investigated the other vendors as much. I don&rsquo;t think SDP or Zero Trust would fit in a baseline list. They are very effective at limiting lateral movement in the network though, making it exceedingly difficult for malware or an attacker to spread - however, the current effort to implement, for most organizations, is high. I feel SDP and Zero Trust would belong on an &ldquo;Advanced&rdquo; Security list, not a baseline.<br>So, what would I add to the list? I feel the <a href=https://www.cyber.gov.au/acsc/view-all-content/publications/essential-eight-maturity-model rel=external>ASD Essential 8</a>
make up the bulk of the additional components. Those eight items are:</p><ul><li>Application Control/Whitelisting</li><li>Patch Applications</li><li>Configure MS Office Macro settings</li><li>User App Hardening</li><li>Restrict Admin Privileges</li><li>Patch OSes</li><li>MFA</li><li>Regular Backups</li></ul><p>All of these will require effort to implement correctly, and a few will potentially annoy users (MFA, Office Macros, App hardening - but restricting admin privileges, if users currently have them, most of all). The improvement in security by implementing these controls is significant and worth working with users to achieve.</p><p>There are still a few more things that we should add to this list.<br>While SDP might be too much of a lift for most networks, I do think that a Next Gen Firewall and <a href=https://www.clintmcguire.com/blog/4-segment-network/ rel=external>Segmenting the Internal Network</a>
deserve to be on the list.</p><p>Having reviewed the <a href=https://verizon.com/dbir/ rel=external>Verizon 2021 Data Breach Investigations Report</a>
findings, it’s clear that in 2020, the largest number of attacks were Business Email Compromise and they had the highest median loss. So, we should add Mail Filtering to the list. [Yes, Ransomware gets a lot of headlines, but check the numbers for 2020, Verizon&rsquo;s data is quite clear. Also, if you look at the ASD Essential 8 - Ransomware is quite effectively mitigated by these 8 items.]</p><p>The last item for the list, I believe, is Security Awareness training, also recommended by Greg & Johna - in <a href=https://packetpushers.net/podcast/hs-009-the-metrics-of-it-security/ rel=external>Heavy Strategy Ep. 009 - The Metrics of IT Security</a>
.</p><h2 class=h6 id=wrap-up><a class="text-body text-decoration-none" href=#wrap-up>Wrap up</a></h2><p>Here is the full list.</p><ul><li>Asset Inventory</li><li>EPP for all Endpoints</li><li>Application Control/Whitelisting</li><li>Patch Applications</li><li>Configure MS Office Macro settings</li><li>User App Hardening</li><li>Restrict Admin Privileges</li><li>Patch OSes</li><li>MFA</li><li>Regular Backups</li><li>Next Gen Firewall</li><li>Segmented Network Design</li><li>Mail Filtering</li><li>End User Security Awareness Training</li></ul><p>There are 14 items, listed in no particular order.<br>How does your organization compare to this list?<br>Do you think anything should be added or removed from the list?<br>I&rsquo;d like to hear about this in the comments.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2021-10-11:/blog/securitybaseline/</guid>
                    

                    
                        <link>http://localhost:1313/blog/securitybaseline/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/securitybaseline/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Mon, 11 Oct 2021 07:47:36 -0600</pubDate>
                    

                    
                        <title>Security Baseline</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>If you have MCLAG setup on FortiSwitches, you can setup static Trunks to the ESXi hosts for redundant connections.</p><p>I&rsquo;ve used this with FortiOS 6.2 and 6.4 with VMware 6.7. I&rsquo;ve only attempted this with FortiGate Managed FortiSwitch, I believe - but can&rsquo;t confirm - that this is a requirement. (I&rsquo;m pretty sure MCLAG only works when the FortiSwitches are Managed by a FortiGate.)</p><p>Directions are below.<br>Requirments:</p><ul><li>Two FortiSwitches capable of MCLAG (Model 200+)</li><li>Two NIC ports in the ESXi hosts</li><li>One cable from the ESXi host connecting to each switch</li></ul><h3 class=h6 id=vswitch-standard-settings><a class="text-body text-decoration-none" href=#vswitch-standard-settings>vSwitch Standard Settings</a></h3><p>I&rsquo;ve only tested this with Standard vSwitches, so my directions will only cover them.</p><p>Create a vSwitch for the ESXi host with the Teaming and Failover settings as follows:</p><ul><li>Load Balancing set to &lsquo;Route based on IP hash&rsquo;</li><li>Network Failure Detection to &lsquo;Link status only&rsquo;</li><li>Teaming and Failover setting for the NICs to have both NICs as Active</li></ul><h3 class=h6 id=fortiswitch-settings><a class="text-body text-decoration-none" href=#fortiswitch-settings>FortiSwitch Settings</a></h3><p>With the switches already setup for MCLAG, create a new Trunk.</p><ul><li>Set MCLAG to Enabled</li><li>Set the Mode to Static</li></ul><p>That is all the config required.</p><p>Make sure your hosts are cabled correctly and you should have redundant connections.</p><p>You will need to assign the correct Native and Allowed VLANs - just like any other connection type.
If you have Device Detection enabled for those VLANs the FortiGate will start to report the VMs as connected to the ports - in my experience the VM names only show up on one of the Trunk links at a time, I believe because of how vSphere/ESXi assigns VM NICs to Physical NICs&mldr;</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2021-09-06:/blog/fortiswitch-mclag-vmware/</guid>
                    

                    
                        <link>http://localhost:1313/blog/fortiswitch-mclag-vmware/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/fortiswitch-mclag-vmware/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Mon, 06 Sep 2021 17:43:40 PDT</pubDate>
                    

                    
                        <title>Setup MCLAG Trunks between FortiSwitch and VMware</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=the-symptoms><a class="text-body text-decoration-none" href=#the-symptoms>The Symptoms</a></h2><p>A client was having an issue with IPsec VPN connections to their FortiGate. Users were getting non-descriptive error messages and not able to connect. The issue was affecting all users.
We couldn&rsquo;t find anything in the FortiClient or FortiGate logs to indicate what the problem was.
As far as we could see, the FortiClient connection was simply timing out.</p><p>The FortiGate Web GUI showed us LDAP was working.
Looking at packet traces on the FortiGate we could see the IPsec traffic come in, but we weren&rsquo;t seeing any traffic going back to the source.</p><h2 class=h6 id=the-problem><a class="text-body text-decoration-none" href=#the-problem>The Problem</a></h2><p>The Web GUI was lying to us. I believe because caching for LDAP was turned on, but that doesn&rsquo;t make things better&mldr;</p><p>When we ran the LDAP test commands from the CLI we finally saw that the FortiGate wasn&rsquo;t able to talk to the LDAP servers.</p><p>The command, by the way, is <code>diagnose test authserver ldap &lt;LDAP Server Name> &lt;username> &lt;password></code></p><h2 class=h6 id=the-root-cause><a class="text-body text-decoration-none" href=#the-root-cause>The Root Cause</a></h2><p>The actual reason that this stopped working was a change we made to the SD-WAN rules on this FortiGate.
It was not able to talk to the LDAP server because the traffic wasn&rsquo;t being routed correctly.<br>As we&rsquo;ve been working through SD-WAN deployments we&rsquo;ve found some quirks to the way the FortiGates handle local-source traffic, by default it doesn&rsquo;t always behave as you might expect.<br>The change to the SD-WAN rules meant that LDAP traffic was now trying to go out the wrong interface, because it was no longer matching our defined rules, it was matching the Implicit SD-WAN rule.</p><h2 class=h6 id=the-fix><a class="text-body text-decoration-none" href=#the-fix>The Fix</a></h2><p>To fix the actual problem we set the source ip for LDAP to one of the internal IPs, so that it would match the SD-WAN rule that would route the traffic correctly.</p><p><code>config user ldap</code><br><code>set interface-select-method sdwan</code><br><code>set source-ip x.x.x.x</code><br><code>end</code></p><p>I&rsquo;ve added the interface-select-method option because it is also required, but was already in place for us.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2021-07-04:/blog/fortigate-cli-ldap-test/</guid>
                    

                    
                        <link>http://localhost:1313/blog/fortigate-cli-ldap-test/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/fortigate-cli-ldap-test/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sun, 04 Jul 2021 10:44:13 PDT</pubDate>
                    

                    
                        <title>FortiGate CLI LDAP Test</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h5 id=essential-eight><a class="text-body text-decoration-none" href=#essential-eight>Essential Eight</a></h2><p>The Australian Signals Directorate, an organization with a similar* mission to the American NSA, has published a number of very interesting documents.<br>Their <a href=https://www.cyber.gov.au/publications/essential-eight-explained rel=external>Essential Eight Explained</a>
provides a quick overview of the eight Mitigations to cyber security threats that they deem to be the most effective. These eight, implemented properly and proactively, will establish a secure baseline for an organization. The eight are a subset of a <a href=https://www.cyber.gov.au/publications/strategies-to-mitigate-cyber-security-incidents rel=external>larger list</a>
. The larger list covers many more technologies and process that can be implemented to address and mitigate further risks.<br>Not all organizations need to address the risks mitigated by the larger list, but every organization would benefit from implementing the Essential Eight.</p><p>*sort of&mldr; If you want to investigate further their site is <a href=https://www.asd.gov.au/ rel=external>here</a></p><h2 class=h5 id=what-are-the-eight><a class="text-body text-decoration-none" href=#what-are-the-eight>What are the Eight</a></h2><p>The list is pretty simple</p><ul><li>Application Control Listing</li><li>Patch applications</li><li>Configure MS Office Macros</li><li>User application hardening</li><li>Restrict Admin Privileges</li><li>Patch OSes</li><li>Use Multi-factor authenticaion</li><li>Perform daily backups</li></ul><p>The first four assist in mitigating the risk of getting infected with malware.<br>Items five through seven are to prevent or limit the spread of malicious activity if/when malware gets inside the network.<br>The final assist with returning to normal operations.</p><p>Implementing these eight technologies and processes will dramatically raise the baseline security level of an organization, making it much more difficult for malicious software/actors to impact an organization.<br>However, these are not all trivial to implement.</p><h3 class=h6 id=two-six-eight><a class="text-body text-decoration-none" href=#two-six-eight>Two, Six, Eight</a></h3><p>Probably the easiest three on the list, Patching Applications, Patching Operating Systems and Daily Backups, are much easier today than they was a decade ago, but there are still operational challenges. Patching all applications and operating systems requires an accurate and up to date inventory of all devices and their software. This list will also need to include all internet facing/permiteter equipment, as these have recently been under more and more scrutiny.
<a href=https://www.theregister.com/2015/12/20/juniper_details_two_attacks_from_unauthorised_code/ rel=external>1</a>
<a href=https://security.paloaltonetworks.com/CVE-2020-2021 rel=external>2</a>
<a href=https://www.zdnet.com/article/this-critical-citrix-netscaler-bug-could-affect-80000-companies/ rel=external>3</a>
<a href=https://portswigger.net/daily-swig/sophos-xg-firewall-zero-day-vulnerability-gets-patched rel=external>4</a>
Disk is much cheaper today than it was 10 years ago, but data has grown over that time period too, making daily backups still challenging for organizations, where backup windows can run into business hours, or where business hours are around the clock.</p><h3 class=h6 id=one><a class="text-body text-decoration-none" href=#one>One</a></h3><p>Let&rsquo;s return to the first item on the list - Application Control. This is also known as Application Whitelisting. At a basic level it is designed to limit what applications can run on a computer. More advanced implementations track additional system components, to ensure only authorized DLLs and scripts can run.<br>Correctly implementing an application control list will prevent malicious code from executing on the organization&rsquo;s computers, while allowing trusted applications to run for users. However, this requires a fair bit of planning and effort to implement. Thankfully, Windows (AppLocker), MacOS (Gatekeeper) and Linux (SELinux) all include some built-in application control listing capability. There are additional security offerings for control listing in Windows - Carbon Black App Control and Airlock Digital, to name two.
&lt;Find additional Linux & MacOS options. CMD software for linux? &mldr;></p><h3 class=h6 id=three-and-four><a class="text-body text-decoration-none" href=#three-and-four>Three and Four</a></h3><h3 class=h6 id=five-and-seven><a class="text-body text-decoration-none" href=#five-and-seven>Five and Seven</a></h3>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-06-04:/blog/asd-essential-8/</guid>
                    

                    
                        <link>http://localhost:1313/blog/asd-essential-8/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/asd-essential-8/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Thu, 04 Jun 2020 22:50:47 PDT</pubDate>
                    

                    
                        <title>ASD Essential Eight</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=things-werent-working-as-expected><a class="text-body text-decoration-none" href=#things-werent-working-as-expected>Things weren&rsquo;t working as expected</a></h2><p>I had recently enabled the SSL Deep Inspection policy on some of my web traffic - in part to try to block ads, maybe I&rsquo;ll write a blog post about that another time - and I was noticing odd behaviour.</p><p>A few of the odd things were around VPN connections and Citrix sessions.<br>FortiClient VPN wasn&rsquo;t able to connect - it was getting to 80% then throwing an error saying there was something wrong w/ my credentials or my account wasn&rsquo;t setup for VPN access.<br>With Citrix, apps would look like they were launching from the StoreFront, but they wouldn&rsquo;t load - they wouldn&rsquo;t even briefly show up in the connection manager. Launching a published desktop it would load the app&rsquo;s borders, but then throw an error.</p><p>Once I saw the Citrix published Desktop error, I was pretty sure I knew the source.</p><h2 class=h6 id=but-id-already-installed-the-cert-the-fortigate-was-using><a class="text-body text-decoration-none" href=#but-id-already-installed-the-cert-the-fortigate-was-using>But I&rsquo;d already installed the cert the FortiGate was using</a></h2><p>I had installed the FortiGate&rsquo;s cert as a Trusted Root CA Cert on my laptop, so I was expecting the traffic would be fine. However, I needed to exclude the sites from the SSL Inspection rule. Once the exclusion was in place everything started working again.</p><p>To add the sites, expand Security Profiles - SSL/SSH Inspection.<br><img src=http://localhost:1313/SecurityProfiles-SSL.png alt="SSL/SSH Inspection Policy section"></p><p>Select the policy in use, and scroll down to the &ldquo;Exempt from SSL Inspection&rdquo; section.<br><img src=http://localhost:1313/ExemptFromSSL.png alt="SSL Inspection Exemption"></p><p>You can exempt entire web categories, but I needed to exempt addresses.<br>To create a new address, click the &ldquo;+&rdquo; at the bottom of the addresses column, this will open the &ldquo;Select Entries&rdquo; panel, click the &ldquo;+ Create&rdquo; button to add a new entry. From the options, I needed to select Wildcard FQDN for each of the client&rsquo;s URLs.<br><img src=http://localhost:1313/CreateNewAddress.png alt="Create new Address"></p><p>Give the new address entry a name, enter the URL and hit OK. For the URL I used <code>*.example.com</code>. This will not take <code>www.example.com</code>, it will only accept <code>*</code> on the version of FortiOS I was working on.</p><p>Make sure to add the new address to the list of exclusions, then click Ok to update the policy.</p><p>You might need to close and re-open your browser for the FortiGate to stop swapping its cert in for the orginal.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-06-02:/blog/fortigatessldeepinspectionexclusion/</guid>
                    

                    
                        <link>http://localhost:1313/blog/fortigatessldeepinspectionexclusion/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/fortigatessldeepinspectionexclusion/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Tue, 02 Jun 2020 23:04:11 PDT</pubDate>
                    

                    
                        <title>FortiGate SSL Inspection Exclusion</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=local-preference><a class="text-body text-decoration-none" href=#local-preference>Local Preference</a></h2><p>I needed to use BGP to advertise the networks in a multi-site network, with FortiGates acting as routers at each site. Using iBGP we configured the Primary Subnet at the Primary Date Center to also be advertised by the DR Data Center. However, because the workload would only be active at the Primary DC - until an actual DR event happened - we needed to ensure that traffic for that subnet would only be routed to the Primary DC.<br>Reviewing the documentation I determined that modifying the Local Preference was the best option to configure.</p><p>In the FortiGates, we created a BGP Route Map, added a rule and used the command <code>set set-local-preference 200</code>. This route map is then applied to the neighbour defined as the Primary Site - by using the <code>set route-map-in “&lt;BGP Rule Name>”</code>.</p><p>The default Local Preference assigned to iBGP routes, on FortiGates, is 100. So we needed to increase the preference on the Primary Site neighbour, so that it would route to that host. By modifying this value all the BGP information is still being propagated to all the sites, but the FortiGates will exclude the lower preference sites from the routing table, while the route to the high preference sites are up.</p><p>One other thing I ran into while testing this was <code>route-map-in</code> versus <code>route-map-out</code>.<br>We already had <code>route-map-out</code> values configured on the neighbours, I didn’t notice the distinction, initially, so I was scratching my head trying to figure out why the route-map wasn’t modifying the BGP Table.</p><p>The <code>route-map-out</code> doesn’t process the Local Preference value, because the <code>out</code> is for modifying outbound BGP information.<br>Local Preference only modifies incoming data - so it needs to be applied via <code>set route-map-in</code>.</p><p>Speaking of the BGP Table, on FortiGates you can see the table by running <code>get router info bgp networks</code>.</p><p>As you make changes to the BGP config, you will need to refresh the table, you do that by clearing the neighbours:<br><code>exe router clear bgp ip &lt;neighbour-ip> soft</code></p><p>If you can handle a network disruption you can run this command:<br><code>exe router clear bgp ip &lt;neighbour-ip></code><br>This one isn’t recommended on production gear during business hours, but maybe you really do need to do it&mldr;</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-06-01:/blog/bgplocpref/</guid>
                    

                    
                        <link>http://localhost:1313/blog/bgplocpref/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/bgplocpref/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Mon, 01 Jun 2020 21:49:42 PDT</pubDate>
                    

                    
                        <title>BGP Local Preference</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=high-level-overview><a class="text-body text-decoration-none" href=#high-level-overview>High Level Overview</a></h2><p>To explain ADVPN it is useful to contrast it with the two main alternatives - Hub & Spoke and Full Mesh.</p><p>In a Hub & Spoke network one site is deemed the Hub, with all other sites - Spokes - connecting directly to the Hub.
In a Full Mesh all sites connect to all other sites.</p><p>ADVPN starts as Hub & Spoke, with one site deemed the Hub - but all Spokes can directly connect by getting connection details from the Hub.</p><p>Using ADVPN reduces the number of IPsec tunnels that need to be maintained by each site - as they only need to have persistent connects to the Hub and will have temporary connections to the other Spokes - as required for traffic.</p><p>A common use case is a VoIP deployment, where Spokes will need to directly connect to each other for calls.</p><h2 class=h6 id=examples><a class="text-body text-decoration-none" href=#examples>Examples</a></h2><p>Comparing a Full Mesh, Hub & Spoke and ADVPN in terms of a VoIP system is useful, so let’s do that…</p><p>First, there are <em>n</em> sites and each site has only one outbound connection (DIA or MPLS).</p><p>In a Full Mesh, all sites are persistently connected to each other. So each site has <em>(n - 1)</em> IPsec tunnels. VoIP connections can be quickly made between sites, because the routing is persistently in place.</p><p>In a Hub & Spoke all Spokes have 1 IPsec tunnel - back to the Hub, and the Hub has <em>(n - 1)</em> IPsec tunnels. VoIP connections between two sites must route through the Hub. This can lead to some unoptimized paths, as two sites geographically close could be sending traffic to a geographically distant Hub.</p><p>In ADVPN all Spokes have 1 persistent IPsec tunnel - back to the Hub, and the Hub has <em>(n - 1)</em> IPsec tunnels, until two Spokes need to complete a call. When a new VoIP call is initiated the traffic will initially be sent to the Hub and routed to the other Spoke, then the Hub will provide details for the two Spokes to connect directly.</p><p>Second, there are <em>n</em> sites and each site has two outbound connections (DIA or MPLS) with IPsec connections setup to be fully redundant.</p><p>In a Full Mesh, all sites have four IPsec connections to all other sites. I believe that would make the math <em>4(n - 1)</em>, per site.</p><p>In a Hub & Spoke all Spokes have 4 IPsec tunnels back to the Hub, and the Hub has <em>4(n - 1)</em> IPsec connections to the Spokes.</p><p>In ADVPN all Spokes have 4 IPsec tunnel back to the Hub. They will bring up 4 tunnels to each other Spoke as required.</p><p>Why 4 tunnels instead of 2? Because each site has 2 outbound connections, that will make 2 endpoints at each end of the connection. To have these fully redundant Hub link 1 will need to connect to Spoke link 1 and Spoke link 2, the same with Hub link 2.<br>So there are 4 connections.<br>This applies to the Full Mesh as well, greatly compounding the number of IPsec tunnels in a Full Mesh with two Internet connections at each location.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-05-29:/blog/advpn-overview/</guid>
                    

                    
                        <link>http://localhost:1313/blog/advpn-overview/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/advpn-overview/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Fri, 29 May 2020 10:15:14 PDT</pubDate>
                    

                    
                        <title>ADVPN Overview</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=issue><a class="text-body text-decoration-none" href=#issue>Issue</a></h2><p>FortiManager, when it&rsquo;s new - I think, will sometimes try to push a certificate to FortiGate devices.<br>The error message in FortiManager is spread across four lines, they are:<br>&ldquo;Input is not a valid CA certificate.&rdquo;<br>&ldquo;The field ca is empty!&rdquo;<br>&ldquo;node_check_object fail! for ca&rdquo;<br>&ldquo;Attribute &lsquo;ca&rsquo; MUST be set.&rdquo;<br><img src=http://localhost:1313/FortiManagerVPNCA.png alt="Error message"><br>I&rsquo;ve run into this in my lab, and I&rsquo;m pretty sure I saw this in a production FortiManager.<br>I found this issue discussed on the Fortinet forums, but I didn&rsquo;t find the solution there.</p><h2 class=h6 id=solution><a class="text-body text-decoration-none" href=#solution>Solution</a></h2><p>The solution that I used to fix this in my lab was to remove the certificate entries from the CLI configs.<br>It is located in two places - probably&mldr;</p><p>First - we can remove the certificate from the Policy configuration, this may be all that is needed to resolve the issue.<br>Under Policy and Objects, select the Object Configuration screen. Go to the CLI Only Objects.<br>Expand vpn, expand certificate, select ca.<br>Select and Delete the certificate that is causing the issue.</p><p>Second - if required, you can remove the certificate from each device&rsquo;s configuration.<br>On the Device Manager screen, under CLI Configurations.<br>Expand: vpn, certificate, ca.<br>Select and Delete the certificate that is causing the issue.</p><p>NOTE: By default, FortiManager will not show you CLI Only Objects or CLI Configurations.<br>If you don&rsquo;t see them then you will need to modify the Display Options.<br>In Policy and Objects, click on Tools, Display Options.<br>At the very bottom of the list, you should see CLI Only Objects. Check the box and click OK.<br>In Device Manager, click on Tools, Global Display Options.
At the very bottom, again, you should see CLI Configurations. Check the box and click OK.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-05-27:/blog/fortimanager-vpn-certificate/</guid>
                    

                    
                        <link>http://localhost:1313/blog/fortimanager-vpn-certificate/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/fortimanager-vpn-certificate/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Wed, 27 May 2020 23:18:28 PDT</pubDate>
                    

                    
                        <title>FortiManager VPN Certificate</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=fortigate-scripts><a class="text-body text-decoration-none" href=#fortigate-scripts>FortiGate Scripts</a></h2><p>I&rsquo;ve been doing quite a bit of scripting for FortiGates recently. Much of it in TCL.<br>FortiManager is capapble of running TCL scripts, which allow for the script to make decisions.<br>For example, I have a script that will check the name of the FortiGate it is running on, then based on the hostname, it will assign different values to the device. I needed to write this script so I could roll out ADVPN to multiple sites, for a client.</p><p>While I can&rsquo;t publish the ADVPN script, I have put a CLI to TCL conversion script up on <a href=https://github.com/clintmc/fortinet/blob/master/ConvertToTCL.ps1 rel=external>GitHub</a>
. This script will take a text file and wrap uncommented lines, so they can be processed by TCL.</p><p>TCL/FortiManager require each line of CLI command to be executed to be wrapped in some annoying to type and annoying to read additonal character. By running the CLI commands through my converter script - and adding a Procedure to the output - the TCL script is easier to read/understand.</p><p>Let me point it out again - the conversion script doesn&rsquo;t add the procedure, it only wraps the CLI commands in the text required for the procedure to run the commands. The output file has one specific job - take CLI commands and turn them into something FortiManager can run as TCL.</p><p>It won&rsquo;t perform any further logic - you will need to supply that, and you should probably write it in after you run the conversion script, otherwise your output will look weird and probably not run.</p><p>I&rsquo;ve created a new, currently public, <a href=https://github.com/clintmc/fortinet rel=external>repo</a>
for Fortinet related scripts. I will probably add some more scripts to this repo. I think I can add some scripts I&rsquo;ve been using in my lab.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-05-26:/blog/fortigate-scripting/</guid>
                    

                    
                        <link>http://localhost:1313/blog/fortigate-scripting/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/fortigate-scripting/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Tue, 26 May 2020 22:51:16 PDT</pubDate>
                    

                    
                        <title>FortiGate Scripting</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=problems><a class="text-body text-decoration-none" href=#problems>Problems</a></h2><ol><li>My site was not available over HTTPS.</li><li>My site was slow to load.</li></ol><h2 class=h6 id=investigation---https><a class="text-body text-decoration-none" href=#investigation---https>Investigation - HTTPS</a></h2><p>This site is hosted on GitHub, so going through their documentation it looked like I should have been able to use a CDN and still have GitHub generate a cert for the site. However, it was not.</p><h2 class=h6 id=solution---https><a class="text-body text-decoration-none" href=#solution---https>Solution - HTTPS</a></h2><p>As an experiment I disabled the CDN, to see if GitHub would be able to generate the certificate - this worked pretty quickly and in the end was pretty simple. I was trying to do something fancy and ended up in a situation where the CDN wasn&rsquo;t really doing everything it could, and neither was GitHub.</p><p>Unfortunately, not having the CDN meant that there was no caching to speed up the page loads. So I would notice how slow the page would load after posting updates. At first I thought it was just because the site would need to get re-cached in GitHub&rsquo;s CDN (I&rsquo;m pretty sure they use one, but I haven&rsquo;t investigated) and after I visited it the first time the cache would start to get updated on the CDN servers and everything would be fine.<br>I was wrong.</p><h2 class=h6 id=investigation---slow-site><a class="text-body text-decoration-none" href=#investigation---slow-site>Investigation - Slow Site</a></h2><p>I noticed, after not making any changes, that the site was still slow.<br>So I found a couple tools that check page load speeds and I was informed that my &lsquo;avatar&rsquo; and &lsquo;hero&rsquo; images were too large and slowing down the page load.<br>So I went about resizing the avatar image, because it was actually a very large image - 1985 x 1383 - and tried to bring it down to the 110 x 77 that the image displays as. But I found that when I brought the image down that small, even without any compression - the image quality dropped off. So I could get that image to the exact right size, to make the tool happy, but I wasn&rsquo;t happy with it anymore.<br>The hero image is the header image on the top of this page - it needs to resize dynamically with the screen size, which the tools understand, so they weren&rsquo;t so much complaining about the file size. They complained about the file format. This one was pretty easy to fix.</p><h2 class=h6 id=solution---slow-site><a class="text-body text-decoration-none" href=#solution---slow-site>Solution - Slow Site</a></h2><p>In the end I decided that scaling the avatar image down to 300 x 209 was about as small as I could make the image, but still keep the display quality high - perhaps I was doing something wrong with the scaling process, but this seemed like the best solution to me.<br>Although the tools are still grumpy about the image being larger than it&rsquo;s actual display size&mldr;<br>For the hero image, I just had the image converted to webp format.<br>I&rsquo;m not sure if this is a quirk of the theme I&rsquo;m using, but each of the static pages for this site have their own hero value, so to implement this solution across all pages would require me to update each of the page files. I might get around to that in a few days - but I think I will take a look at the Hugo documentation to see if there is a way I can make this change in the main config file&mldr;</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-04-05:/blog/optimization/</guid>
                    

                    
                        <link>http://localhost:1313/blog/optimization/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/optimization/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sun, 05 Apr 2020 23:42:24 PDT</pubDate>
                    

                    
                        <title>Optimization</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=home-lab-build><a class="text-body text-decoration-none" href=#home-lab-build>Home Lab Build</a></h2><p>This seems like good time to dust off the home lab gear. So I&rsquo;ve pulled the hardware out and made sure everything has downloaded all the updates.</p><p>My lab is pretty simple.<br>The network is a FortiGate, FortiSwitch and FortiAP.<br>The compute and storage is a desktop that I&rsquo;ve jammed as many SSDs into as I can.<br>I&rsquo;m running Hyper-V on Windows 10, because it is simple and provides the features I need.</p><p>The rest of the house also uses the Fortinet devices, so I&rsquo;ve put the lab &ldquo;server&rdquo; on its own VLAN.<br>This allows me to setup all the trappings of an AD domain, with out any bleed over into the rest of the house.<br>And since everyone is home all the time and using the network - I can&rsquo;t have my lab be a bottleneck.<br>I need to be able to reboot or simply shutdown my lab, without it affecting regular operations.</p><p>Because the FortiSwitch is managed by the FortiGate I created the new VLAN on the FortiGate, assigned it to the port I had connected the &ldquo;server&rdquo; to, and then built firewall rules around this VLAN.<br>I can lock down access into and out of this VLAN on the FortiGate to as granular as required, without any additional configuration on any other devices.<br>So I can access and manage my lab without it impacting the rest of the family.</p><h2 class=h6 id=home-lab-plan><a class="text-body text-decoration-none" href=#home-lab-plan>Home Lab Plan</a></h2><p>I&rsquo;m not entirely sure what I&rsquo;m going to test out first - but I have some Active Direcotry Certificate Services questions I would like to get answers too, and the best way is probably to just test it all out.<br>However, before I start building out all the servers for that, I think I will start with how to best setup and tear down a lab. I know there are many options in this space, and I&rsquo;ve played with several of them a little bit in the past, but it&rsquo;s been a while.<br>I suspect I will have something next week to post about my experiments in steamlined lab setup.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-04-04:/blog/homelab/</guid>
                    

                    
                        <link>http://localhost:1313/blog/homelab/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/homelab/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sat, 04 Apr 2020 22:43:54 PDT</pubDate>
                    

                    
                        <title>Home Lab</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=how-the-new-plan-went><a class="text-body text-decoration-none" href=#how-the-new-plan-went>How the new plan went</a></h2><p>The training was executed as <a href=https://www.clintmcguire.com/blog/training-in-isolation/ rel=external>planned</a>
.</p><p>Twenty seconds of work, followed by twenty seconds of rest was not much of a stimulus.<br>The two minutes of rest at the end was enough to nearly fully recover between rounds.
Three rounds was sufficient to get my heart rate up, warm up joints and generally get my day started.</p><p>Skipping easy didn&rsquo;t go as poorly as I expected - in regards to stepping on the rope - but my calves need to get used to the jumping.</p><h2 class=h6 id=update-to-the-plan><a class="text-body text-decoration-none" href=#update-to-the-plan>Update to the plan</a></h2><p>I&rsquo;m going to increase the work to 25 seconds.<br>I&rsquo;m going to keep the rest between movements at 20 seconds and keep the rest between rounds at 2 minutes.<br>I&rsquo;m going stay doing 3 rounds, as this is a big lever for adding working, so I will start using it once I feel I have a better pattern sorted out.</p><p>I didn&rsquo;t time my skipping - it wasn&rsquo;t an objective - I&rsquo;m not yet ready to start timing it, but in a few days I expect that I will want to hit a minimum time.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-04-03:/blog/training-report-day1/</guid>
                    

                    
                        <link>http://localhost:1313/blog/training-report-day1/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/training-report-day1/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Fri, 03 Apr 2020 22:44:56 PDT</pubDate>
                    

                    
                        <title>Training Report - Day 1</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=in-the-before-time><a class="text-body text-decoration-none" href=#in-the-before-time>In the Before Time</a></h2><p>Before everybody had to stay home all the time, I would be at the local gym 3 days a week working out with barbells. I would squat, either bench or overhead press, deadlift and then do chin ups. Simple, effective, full body and as heavy as I could make it.<br>My goal for 2020 was to deadlift 555 pounds for a set of 5 reps. I was deadlifting 380 pounds for 5 reps before the gym closed, so I am not likely to hit my goal this year.<br>This is fine - things happen. 555 pounds was a stretch to begin with.<br>I had calculated in early January that I needed to add about 4 pounds to my deadlift a week for 40 weeks to hit this goal. But I re-aggivated a shoulder injury and that set me back a bit in February. So with the gym closed - and not having a home gym - I&rsquo;ve got to come up with something else.</p><h2 class=h6 id=first-try><a class="text-body text-decoration-none" href=#first-try>First Try</a></h2><p>I started doing a circuit of 9 movements, each movement for 5 reps - except the last, which was planks, which I would hold for 30 seconds. I would try one or two rounds in the morning and then think about doing another 2 rounds at lunch (which I don&rsquo;t think ever happened) and then maybe do 2 or 3 rounds after work.<br>I&rsquo;ve got a 45 pound kettlebell and a pair of 20 pound kettlebells and the second or third round in a row would start to get my heart up and get me sweaty.</p><p>But this isn&rsquo;t working for me. Each movement is too little to do much and the total work of 3 rounds isn&rsquo;t much either. So this plan has been discarded.</p><h2 class=h6 id=second-try><a class="text-body text-decoration-none" href=#second-try>Second Try</a></h2><p>My new plan, which like all plans is only good until you get punched in the face (to twist up a Mike Tyson quote), is to do a 3 movement circuit, each movement will be done for 20 seconds - with a 20 second break between movements, then rest for 2 minutes before repeating the circuit. Ideally pushing myself for 3 rounds to start.<br>Unlike the previous plan I&rsquo;m doing this first thing in the morning - then going about my day.<br>At lunch I&rsquo;m going to skip rope for a few minutes - just skip easy for a for a bit, no set time goal.<br>I haven&rsquo;t skipped rope for a while, so this is going to suck. My timing will be off and it&rsquo;s really boring to skip easy.</p><p>Switching to a time based, instead of rep based plan should allow me to accumulate more work in the specific movements. Alternating working and rest should provide more of a cardio stimulus and then a cardio recovery period. The weights I&rsquo;m moving are small for me - so I don&rsquo;t expect to get completely gassed, but it is certainly possible - especially in the 3rd round.<br>In the first plan I didn&rsquo;t take a break between circuits, so the only rest was changing positions/changing kettlebells/planks. (Yeah, planks were a rest - they weren&rsquo;t easy, but compared to squatting 340 for 5 reps, well, yeah, they were easy compare to that.)<br>Skipping at lunch is partially to break up the day and force myself to do something active.</p><h2 class=h6 id=thoughts-on-calorie-intake><a class="text-body text-decoration-none" href=#thoughts-on-calorie-intake>Thoughts on Calorie Intake</a></h2><p>Lifting 3 days a week at near max for every set burns a lot of calories* - my body still craves that level of intake and I&rsquo;m having to actively steer myself into eating for my current calorie needs. Being in the house all day, &rsquo;ery day means fewer calories burned. My understanding of caloric requirements suggest that my Basal Metabolic Rate would account for a large part of my calorie burn - I&rsquo;m a computer guy, not a dietitian - and my basal rate will not have changed much in the last few weeks - so I shouldn&rsquo;t have to actually cut my calories drasticly. However, since I&rsquo;m not lifting and therefore don&rsquo;t need all those extra calories for tissue repair - I should not need to eat as much. But, habits are hard to break and I&rsquo;ve been eating for lifting for a while now, adding the skipping and doing HIIT style exercises should add some additional calorie expenditure. So, in the wash between trying to eat less and doing some exercise I should end up with a minor calorie deficit or minor calorie surplus.</p><p>*<em>a lot is relative - I believe it burns &ldquo;a lot&rdquo; compared to running for 30 minutes. I&rsquo;m also factoring in increased muscle mass raising BMR, pushing the caloric burn of lifting higher still. It&rsquo;s a virtuos cycle - I eat to lift, I lift to eat.</em> ;)</p><p>What are you doing to stay active and fit?</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-04-02:/blog/training-in-isolation/</guid>
                    

                    
                        <link>http://localhost:1313/blog/training-in-isolation/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/training-in-isolation/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Thu, 02 Apr 2020 22:40:20 PDT</pubDate>
                    

                    
                        <title>Training in Isolation</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h5 id=minimal-requirements><a class="text-body text-decoration-none" href=#minimal-requirements>Minimal Requirements</a></h2><p>Here are the quick and dirty steps to get SD-WAN up and running on a FortiGate.<br>I&rsquo;m running FortiOS 6.2.3 on 60E.</p><h3 class=h6 id=sd-wan-interface><a class="text-body text-decoration-none" href=#sd-wan-interface>SD-WAN Interface</a></h3><p>Under Network -> SD-WAN:</p><ol><li>Set the Status to Enabled</li><li>Add at least one available port to the SD-WAN Interface Members</li><li>Hit Apply</li></ol><h3 class=h6 id=perfomance-metrics><a class="text-body text-decoration-none" href=#perfomance-metrics>Perfomance Metrics</a></h3><p>Under Network -> Performance SLA:</p><ol><li>Create a new SLA</li><li>Give it a Name</li><li>For Protocol pick Ping</li><li>Add two IPs for servers to run ping tests against - I&rsquo;d recommend 1.1.1.1 and 8.8.8.8, since they are Anycast and globaly respond quickly, but you might want to add one of your ISP&rsquo;s upstream routers. You need to put two addresses in here. (Can be FQDNs)</li><li>Add the Interface(s) [WAN1 or WAN2, etc.] you want to use this test to the Participants box</li><li>Make sure &ldquo;Enable probe packets&rdquo; is selected - should be by defualt</li><li>Hit Ok</li></ol><h3 class=h6 id=route><a class="text-body text-decoration-none" href=#route>Route</a></h3><p>Under Network -> Static Routes:</p><ol><li>Create a new route</li><li>Destination - Subnet</li><li>Address - 0.0.0.0/0.0.0.0</li><li>Interface - SD-WAN</li><li>Admin Distance - 1 (or higher if you need it, make sure you pick the right one for your setup)</li><li>Hit Ok</li></ol><h3 class=h6 id=firewall-policy><a class="text-body text-decoration-none" href=#firewall-policy>Firewall Policy</a></h3><p>Under Policy & Objects:<br>Create Policies - as required - to allow traffic out by this new interface</p><h2 class=h5 id=overview><a class="text-body text-decoration-none" href=#overview>Overview</a></h2><p>These steps will create a new SD-WAN interface, turn on some basic performance monitoring, and add the new route, so you can use this interface in your Firewall Policies.</p><p>I had originally negelcted to setup the Performance SLA, and regretted it. It was quick to setup and provided some interesting information.</p><p>These steps can be followed as-is with a brand new FortiGate or one currently in production, however, this is easier on a brand new Gate. One that is already in production might require moving interfaces around and re-doing Firewall Policies&mldr;</p><h2 class=h5 id=next-steps><a class="text-body text-decoration-none" href=#next-steps>Next Steps</a></h2><p>Once you&rsquo;ve got a basic SD-WAN running, you can start to enable some of the more interesting features - which is the SD-WAN Rules, under Network. With those rules you can steer traffic based on Source, Destination, Internet Service, Application - so that the traffic goes out the interface to match an SLA requirement or to maximize availalbe bandwidth or you can assign a preferred interface for a specific type of traffic.<br>The Cookbook explains the different SD-WAN Rule options <a href=https://docs.fortinet.com/document/fortigate/6.2.3/cookbook/716691/wan-path-control rel=external>here</a>
.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-04-01:/blog/fortigate-sdwan-setup/</guid>
                    

                    
                        <link>http://localhost:1313/blog/fortigate-sdwan-setup/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/fortigate-sdwan-setup/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Wed, 01 Apr 2020 21:35:39 PDT</pubDate>
                    

                    
                        <title>FortiGate SD-WAN Setup</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=purpose><a class="text-body text-decoration-none" href=#purpose>Purpose</a></h2><p>How do you design a well-organized, well managed network for small/medium business?</p><p>Let&rsquo;s layout some assumptions:</p><ul><li>There are server in the office</li><li>The servers are in either in a well-organized closet or in a server room (they are not in a Colo - but access is restricted)</li><li>There may be some amount of Cloud/SaaS applications</li><li>This is not a VDI environment (we could sketch that out in a different post)</li><li>Security is a concern - but not security at any cost</li></ul><h2 class=h6 id=lets-start-with-what-i-generally-see><a class="text-body text-decoration-none" href=#lets-start-with-what-i-generally-see>Let&rsquo;s start with what I generally see</a></h2><p>As a consultant, I&rsquo;ve been engaged by dozens of small/medium size businesses and many large businesses. What I tend to see in the small/medium group is a flat network using a single subnet - a /24 or less common a /16. There is only one VLAN and all the Servers, Switches, Hypervisors and Desktops are in the broadcast domain.<br>If I was an attacker, this would be a &ldquo;Target Rich Environment&rdquo;&mldr;</p><p>Now, I know how these companies tend to arrive at this situation - whoever originally setup the network didn&rsquo;t have the equipment, budget or network knowledge at the time to do something more complicated - and small business tends to value &ldquo;IT WORKS&rdquo; over &ldquo;IT IS SECURE AND WORKS&rdquo;.<br>I&rsquo;ve seen larger businesses that have struggled to unwinding this technical debt.</p><p>This flat network poses a lot of problems:</p><ol><li>A worm (e.g. NotPetya) that infects one machine has unrestricted access via Layer 2 broadcast to all other IPs</li><li>As the number of machines increase over time the available addresses will eventually run out, requiring some re-IPing</li><li>If a hacker gets control of one desktop they have a platform for attacking the entire network</li><li>Insider threat is also unrestricted</li></ol><p>What&rsquo;s the better option?</p><h2 class=h6 id=nuts-and-bolts><a class="text-body text-decoration-none" href=#nuts-and-bolts>Nuts and Bolts</a></h2><p>With the goal to limit the &ldquo;blast radius&rdquo; - since 3 or the 4 problems I&rsquo;ve listed boil down to too much access - I&rsquo;ve been strongly recommending dividing the network into 4 general segments:</p><ol><li>Desktops</li><li>Servers</li><li>Management</li><li>DMZ</li></ol><p>This isn&rsquo;t revolutionary, but from the environments I&rsquo;ve seen this would be a big change.<br>Small/Medium business do not have unlimited security budgets (who does?), they don&rsquo;t generally have many IT staff members - and those they do have tend to be focused on Servers and Desktops, not the network or security - and their Business Leaders don&rsquo;t have a security focus - yet.</p><p>Let&rsquo;s talk about these segments - this is not a hard and fast rule, this is a basic model. Some businesses will break Servers down into two segments: Applications and Storage/Data. Some businesses will want to segregate their Accounting computers away from the rest of their desktops.<br>But this is the starting point I think most companies can begin from.</p><p>Critically, these four segments need to be separated by a Firewall, applying Layer 7 application controls and full UTM scanning to the traffic.<br>And this is why we are focusing this conversation on Small/Medium business - a Large Organization will have additional equipment and needs, and this design won&rsquo;t fit.<br>A small business can start with an HA Pair of FortiGates and have these 4 segments setup and running on relatively low cost equipment.<br>The UTM scanning is important - I can add AV scanning to the firewall rule that permits SMB traffic from desktops to file servers - this is critical for preventing the spread of worms.<br>I can add IPS to the firewall rules that allow DMZ VMs to talk to internal servers, and I can add IPS to prevent a hacker or insider threat from moving from a desktop to the servers.<br>Having a firewall as the core of the network, instead of a router, provides much better security.</p><p>Let&rsquo;s expand on the Management segment definition, because this is probably the least self-explanatory.<br>The Management segment is where the Hypervisor host management IPs are (ESXi IPs), it&rsquo;s where the Hypervisor management server is (vCenter), it’s where the IPMI management cards are (iLO, iDRAC, IMM), it&rsquo;s where switch management IPs are, it might be where you put your Backup Server.<br>(I believe I could make a pretty good case to put the backup server into yet another segment, all by itself, but let&rsquo;s not digress.)<br>Desktops, Servers and DMZ are all pretty obvious - Servers, as mentioned earlier, might need to be broken down into more than one segment, but for a model, this is fine.</p><p>One last thing about Desktops - where possible and supported by the switch hardware, their network ports should probably be put into an Access or Protected VLAN. This might be a bit trickier for a small business, as this might not be supported on the hardware they have or the hardware they have budget for, but this should be a design ideal to aim for.</p><h2 class=h6 id=what-about-wifi><a class="text-body text-decoration-none" href=#what-about-wifi>What about WIFI</a></h2><p>Yeah, well, I could sit here and list out all the different possible things, what about printers, what about VoIP, what about Fax Machines&mldr;<br>I&rsquo;m not here to design all the networks, I&rsquo;m here discussing a model that I think is an improvement!</p><p>Not satisfied with that answer - fine. It depends. It depends on what the equipment can support, if they are using EAP to bridge laptops to the LAN, or if they are providing Guest WIFI. Likely WIFI is 2, maybe 3 more segments.<br>This breaks my nice neat 4 segment model, so I&rsquo;ve excluded it. :P</p><h2 class=h6 id=yeah-what-about-voip><a class="text-body text-decoration-none" href=#yeah-what-about-voip>Yeah, what about VoIP</a></h2><p>Well, again, it depends&mldr; Most organizations have this on a separate VLAN to start, so that&rsquo;s not too big a problem, but you will have to sort out where the VoIP Servers go and what firewall policies need to be put around that traffic.</p><h2 class=h6 id=summary---firewall-centric-design><a class="text-body text-decoration-none" href=#summary---firewall-centric-design>Summary - Firewall Centric Design</a></h2><p>I believe that generally available, relatively low cost hardware can provide a more secure network for small and medium size business. With a considered network design these organizations could greatly increase their network security.<br>I&rsquo;ve been working with FortiGate products for a few years and am confident that correctly sized appliances will run this well.<br>I&rsquo;ve a bit of experience with WatchGuard and these will probably do fine too. However, I prefer Fortinet&rsquo;s products because they have Switches and APs that plug in and extend the firewall and can all be centrally managed.<br>I would like to hear your thoughts on this model and if you have experience with a similar design, what hardware did you use and how did users find it?</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-04-01:/blog/4-segment-network/</guid>
                    

                    
                        <link>http://localhost:1313/blog/4-segment-network/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/4-segment-network/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Wed, 01 Apr 2020 21:00:55 PDT</pubDate>
                    

                    
                        <title>4 Segment Network</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=what-is-hashing><a class="text-body text-decoration-none" href=#what-is-hashing>What is Hashing</a></h2><p>Very simplified: Hashing is a mathmatical operation used to take an Input and turn it into a different Output.</p><p>More specifically: the hasning function will take an input of variable size and produce an output of a fixed size. The mathmatical process should not be reversible, the same input should always yield a constant output, a small change to the input should have a large change on the output, and two different inputs should never generate the same output.</p><h2 class=h6 id=why-we-hash><a class="text-body text-decoration-none" href=#why-we-hash>Why we Hash</a></h2><p>There are few reason, but let&rsquo;s focus on two. Files and Secure Communications.</p><ol><li><p>Files:<br>If you download a file from a website, you want to make sure the file on your computer is the file as it was put onto the website - you don&rsquo;t want a file that was modified by a malicious actor and you don&rsquo;t want a file corrupted during download. Using a hash published on the original site you can see what hash the author said the file had, when they uploaded it to the site. Then you check the hash of the file on your computer and see if they match. <a href=https://www.clintmcguire.com/blog/compare_file_hash_with_powershell/ rel=external>Here</a>
I&rsquo;ve written up how to do this with PowerShell.</p></li><li><p>Secure Communications:<br>As part of a TLS communication channel, the messages sent, after being encrypted are also hashed - this is a signature - so that they can validated. This is effectively the same thing as validating the file example above, but built into the protocol to happen automatically.</p></li></ol><h2 class=h6 id=some-hash-functions><a class="text-body text-decoration-none" href=#some-hash-functions>Some Hash Functions</a></h2><p>There have been a lot of Hash Functions over the years - many have been discarded. The most commonly used today are MD5, SHA-1, and SHA-2. MD5 is considered cryptographically broken, but it&rsquo;s probably fine for checking to see if that EXE you downloaded was what the author said it was. SHA-1 is considered insecure, and isn&rsquo;t recommended for Secure Communications, but is still fine for looking at files you grab off the internet. SHA-2 is the best option for Secure Communications, but actually isn&rsquo;t the newest. SHA-3 has been published for a while - NIST published it as a standard back in 2015&mldr;<br>I&rsquo;m not sure why this hasn&rsquo;t been adopted widely, yet. I see the OpenSSL has it listed in their <a href=https://www.openssl.org/docs/man1.1.1/man3/EVP_shake256.html rel=external>man</a>
page. But looking around more it isn&rsquo;t mentioned much anywhere else&mldr;
So, until SHA-3 gains wider traction use SHA-2 where you can.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-03-30:/blog/hashing/</guid>
                    

                    
                        <link>http://localhost:1313/blog/hashing/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/hashing/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Mon, 30 Mar 2020 21:22:11 PDT</pubDate>
                    

                    
                        <title>Hashing</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=components><a class="text-body text-decoration-none" href=#components>Components</a></h2><p>As detailed in my post on <a href=https://www.clintmcguire.com/blog/cryptographic-cipher-suites/ rel=external>Cryptographic Cipher Suites</a>
each of the suites has a Protocol, a Key Exchange algorithm, a Signature Authentication algorithm, an Encryption algorithm, and a Message Authentication algorithm.<br>Here we are going to compare these different components and highlight the cipher suites currently considered strong*.</p><p><code>*</code> currently only means at the time of this writting - a flaw could be found in the algorithm or in the implementation of the algorithm at any time, so do additional research to confirm the current strength of the cipher suite. You&rsquo;ve been warned&mldr;</p><p>One last point - I am going to restrict the list of suites to those supported by Windows 10/Windows Server v1903 - because it is the most recent one that they have published a list for (I believe the same list applies to v1909, but I haven&rsquo;t confirmed this), and because it is the area of computers where I spend the most time working with ciphers.</p><h2 class=h6 id=the-list><a class="text-body text-decoration-none" href=#the-list>The List</a></h2><pre tabindex=0><code>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384
TLS_DHE_RSA_WITH_AES_128_GCM_SHA256
TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
TLS_RSA_WITH_AES_256_GCM_SHA384
TLS_RSA_WITH_AES_128_GCM_SHA256
TLS_RSA_WITH_AES_256_CBC_SHA256
TLS_RSA_WITH_AES_128_CBC_SHA256
TLS_RSA_WITH_AES_256_CBC_SHA
TLS_RSA_WITH_AES_128_CBC_SHA
TLS_RSA_WITH_3DES_EDE_CBC_SHA
TLS_RSA_WITH_NULL_SHA256
TLS_RSA_WITH_NULL_SHA
TLS_DHE_RSA_WITH_AES_256_CBC_SHA
TLS_DHE_RSA_WITH_AES_128_CBC_SHA
TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
TLS_DHE_DSS_WITH_AES_128_CBC_SHA256
TLS_DHE_DSS_WITH_AES_256_CBC_SHA
TLS_DHE_DSS_WITH_AES_128_CBC_SHA
TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA
TLS_RSA_WITH_RC4_128_SHA
TLS_RSA_WITH_RC4_128_MD5
TLS_RSA_WITH_DES_CBC_SHA
TLS_DHE_DSS_WITH_DES_CBC_SHA
TLS_DHE_DSS_EXPORT1024_WITH_DES_CBC_SHA No TLS 1.2, TLS 1.1, TLS 1.0, SSL 3.0
TLS_RSA_WITH_NULL_MD5
TLS_RSA_EXPORT1024_WITH_RC4_56_SHA
TLS_RSA_EXPORT_WITH_RC4_40_MD5
TLS_RSA_EXPORT1024_WITH_DES_CBC_SHA
TLS_PSK_WITH_AES_256_GCM_SHA384
TLS_PSK_WITH_AES_128_GCM_SHA256
TLS_PSK_WITH_AES_256_CBC_SHA384
TLS_PSK_WITH_AES_128_CBC_SHA256
TLS_PSK_WITH_NULL_SHA384
TLS_PSK_WITH_NULL_SHA256</code></pre><p><a href=https://docs.microsoft.com/en-us/windows/win32/secauthn/tls-cipher-suites-in-windows-10-v1903 rel=external>Source</a></p><h2 class=h6 id=protocol><a class="text-body text-decoration-none" href=#protocol>Protocol</a></h2><p>This one is simple, they all start with TLS, there is no alternate listed. So, nothing to see here, move along, move along.</p><h2 class=h6 id=key-exchange><a class="text-body text-decoration-none" href=#key-exchange>Key Exchange</a></h2><p>There are 4 Key Exchange options:</p><pre tabindex=0><code>ECHDE
DHE
RSA
PSK</code></pre><p>These are short for:<br>ECHDE - Elliptic Curve Diffie-Hellman Ephemeral - Diffie-Hellman algorithm with Elliptical Curves and an Ephemeral key<br>DHE - Diffie-Hellman Ephemeral - Diffie-Hellman algorithm with Ephermeral key<br>RSA - Rivest Shamir Adleman - RSA algorithm<br>PSK - Pre-Shared Key - a pre-shared key</p><p>Elliptic curve cryptogrophy is a relatively newer form, so may not be supported by all devices - however, it benefits from using a smaller key size because the mathmatics are such that reversing the algorith is exceedingly costly - computationally.</p><p>Ephemeral keys allow for Perfect Forward Secrecy - this is good, but I&rsquo;m not going to go into it here.</p><p>Diffie-Hellman and RSA were both invented in the 1970s, I believe Diffie-Hellman is considered to be a stronger algorithm (I may be wrong about this, I don&rsquo;t have any specific sources), but RSA is more widely used.</p><p>PSK is only available for applications on Windows to use - so this won&rsquo;t be used by IIS or a web browser on the computer (generally); I&rsquo;ve included it here for completeness.</p><h2 class=h6 id=signature-authentication><a class="text-body text-decoration-none" href=#signature-authentication>Signature Authentication</a></h2><p>There are 3 Signature Authentication algoriths:</p><pre tabindex=0><code>ECDSA
RSA
DSS</code></pre><p>ECDSA - Elliptic Curve Digital Signature Algorith - The Digital Signature Algorithm, part of the NIST FIPS, using an Elliptic Curve<br>RSA - Rivest Shamir Adleman - RSA algorimth, as above<br>DSS - Digital Signature Standard - Defined by NIST as part of FIPS</p><p>DSA and DSS are part of the NIST FIPS suite of algorithms.<br>RSA is the other option.
There are technically two &ldquo;export&rdquo; options on this list, but they intentially weak, so let&rsquo;s just pretend they aren&rsquo;t there, and never use them&mldr;</p><h2 class=h6 id=encryption><a class="text-body text-decoration-none" href=#encryption>Encryption</a></h2><p>There are 4 different Encryption algorithms available - in order of strength they are:</p><pre tabindex=0><code>AES  
3DES  
RC4  
DES</code></pre><p>There is also NULL - but that would be no encryption - so it should not be used.<br>DES, 3DES and RC4 are legacy and should be avoided.<br>Leaving only AES.</p><p>There are 4 different options for AES.<br>AES 256 GCM<br>AES 128 GCM<br>AES 256 CBC<br>AES 128 CBC</p><p>CBC - Cipher Block Chaining - this suffers from weaknesses that can be exploited and should be avoided.<br>GCM - Galois/Counter mode - addresses the weaknesses in CBC and is also faster to generate.<br>The options of 128 or 256 are the key size used in the encryption, larger keys are better, but some devices might not be able to calculate the larger keys quickly. GCM 128 is quite strong, 256 is stronger, but might slow down applications on some older devices.</p><h2 class=h6 id=message-authentication><a class="text-body text-decoration-none" href=#message-authentication>Message Authentication</a></h2><p>There are two options for Message authentication - SHA and MD5.</p><p>MD5 is considered insecure and should be avoided.<br>SHA means SHA-1 (Secure Hashing Algorithm version 1), while SHA256 and SHA384 are both SHA-2 (version 2), with either a 256 or 384 bit hash. Longer hashes are better, but take more CPU resources to compute. SHA-1 is considered insecure, and is no longer used for SSL Certificates - but because it only generates a 160 bit hash, it might be fine for your use case.</p><h2 class=h6 id=what-is-strong><a class="text-body text-decoration-none" href=#what-is-strong>What is Strong*</a></h2><p>Well - for starters, it really depends on what you are securing and what you need. If you have just had a security audit run against your internal systems and the report says you need to clean up the suites on your internal webserver, then you need to determine what algorithms are supported by your clients - older OSes may not support newer options - and if their hardware will be able to compute the longer hashes/encrypted messages.</p><p>That said - the strongest options is probably:<br>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</p><p>But, you don&rsquo;t want to restrict your systems to just one cipher suite, you will need to configure a few suites, in order of preference (usually). So these are the ones that are I would suggest you have enabled:<br>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384<br>TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256<br>TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384<br>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256<br>TLS_DHE_RSA_WITH_AES_256_GCM_SHA384<br>TLS_DHE_RSA_WITH_AES_128_GCM_SHA256</p><p>If you need to take a look at additonal cipher suites - look them up on <a href=https://ciphersuite.info/ rel=external>CipherSuite.info</a>
and see what rating they provide (Recommended, Secure, Weak or Insecure).</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-03-29:/blog/crypto-cipher-suite-comparison/</guid>
                    

                    
                        <link>http://localhost:1313/blog/crypto-cipher-suite-comparison/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/crypto-cipher-suite-comparison/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sun, 29 Mar 2020 11:26:57 PDT</pubDate>
                    

                    
                        <title>Crypto Cipher Suite Comparison</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=what-are-cryptographic-cipher-suites><a class="text-body text-decoration-none" href=#what-are-cryptographic-cipher-suites>What are Cryptographic Cipher Suites</a></h2><p>Cipher suites are a combination of different algorithms the system will use to encrypt the communication.
Each operating system/application will have a set of suites it is capable of supporting.</p><p>Let&rsquo;s take a few examples - using the IANA names:</p><ol><li><code>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code></li><li><code>TLS_RSA_WITH_AES_256_CBC_SHA</code></li><li><code>TLS_RSA_WITH_NULL_SHA</code></li></ol><p>Each of these suites has a Protocol, a Key Exchange algorithm, a Signature Authentication algorithm, an Encryption algorithm, and a Message Authentication algorithm.</p><p>Breaking each of them down they look like this:</p><ol><li>Protocol - TLS; Key Exchange - ECDHE; Signature Authentication - ECDSA; Encryption - AES 256 GCM; Message Authentication - SHA384</li><li>Protocol - TLS; Key Exchange and Signature Authentication - RSA; Encryption - AES 256 CBC; Message Authentication - SHA</li><li>Protocol - TLS; Key Exchange and Signature Authentication - RSA; Encryption - NONE; Message Authentication - SHA</li></ol><p>There are different naming schemes for the suite. Windows uses the IANA naming scheme.
OpenSSL and GnuTLS use slightly different names.
There are also Hex codes used to represent the suites.</p><p>At the time of this writing, I&rsquo;ve found the <a href=https://ciphersuite.info/ rel=external>CipherSuite.info</a>
site to be a great resource for looking up the different suites - listing the different names, providing information about the relative strength/weakness of ciphers and being able to look up which suites are affected by different vulnerabilities. Huge shout out the team there.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2020-03-28:/blog/cryptographic-cipher-suites/</guid>
                    

                    
                        <link>http://localhost:1313/blog/cryptographic-cipher-suites/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/cryptographic-cipher-suites/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sat, 28 Mar 2020 10:54:00 PDT</pubDate>
                    

                    
                        <title>Cryptographic Cipher Suites</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=general-tools><a class="text-body text-decoration-none" href=#general-tools>General Tools</a></h2><ul><li>nslookup - standard tool, comes with most OSes</li><li><a href=http://MXToolbox.com rel=external>http://MXToolbox.com</a>
- Very useful site for doing DNS things, generally focused on email related checks - as the name implies - but still includes more general DNS lookup options</li><li><code>Test-Connection</code> - in PowerShell 6, this is really more of a super charged ping - but throw <code>-ResolveDestination</code> at it and it will do a lookup for you</li><li><a href=https://dnssec-analyzer.verisignlabs.com rel=external>dnssec-analyzer</a>
- for testing DNSSEC</li><li><a href=http://whois.domaintools.com rel=external>Whois Lookup</a>
- mxtoolbox&rsquo;s whois lookup hasn&rsquo;t worked for me the last number of times I&rsquo;ve used it, this one does&mldr;</li></ul><p>I&rsquo;m pretty sure I&rsquo;m forgetting 1 or 2, so I will come back and add them when I remember&mldr;</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2019-10-18:/blog/dns-tools/</guid>
                    

                    
                        <link>http://localhost:1313/blog/dns-tools/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/dns-tools/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Fri, 18 Oct 2019 19:29:34 PDT</pubDate>
                    

                    
                        <title>DNS Tools</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=how-it-works-with-cloudflare><a class="text-body text-decoration-none" href=#how-it-works-with-cloudflare>How it works with Cloudflare</a></h2><p>Cloudflare hosts my DNS. It provides me a simple interface for management, 2FA for login and acts as a CDN. So it was an easy choice years ago to move DNS there.</p><p>Since I&rsquo;ve been thinking about DNS <a href=http://www.clintmcguire.com/blog/how-dns-works/ rel=external>a lot</a>
<a href=http://www.clintmcguire.com/blog/how-dns-really-works/ rel=external>lately</a>
I decided to see if I could setup DNSSEC for my own domain.</p><p>It took my about 5 minutes.</p><p>In Cloudflare - under DNS, hit the button to Setup DNSSEC.
It will generate the required details to add to your Domain Registrar.</p><p>In my case I had to provide 4 values to my Registrar.</p><p>BEFORE YOU HIT THE BUTTON - check out this link <a href=https://support.cloudflare.com/hc/en-us/articles/360006660072 rel=external>https://support.cloudflare.com/hc/en-us/articles/360006660072</a>
You are specifically looking to see if your Domain Registrar is in the table under Step 2.</p><p>Your Registrar might not support the cipher that Cloudflare has chosen to use - number 13, ECDSA CURVE P-256 with SHA256 - so it won&rsquo;t be in the list. You can contact your current Registrar and see if they will add support or you can transfer your domain.
Although, some Top Level Domains (TLDs) don&rsquo;t support it, <a href=http://dnssecready.net rel=external>here is a list</a>
, so you might not have much choice there.</p><p>Since my Registrar was on the list, I could follow the link to the Registrar&rsquo;s KB article on setting it up.</p><p>There were two things that weren&rsquo;t well communicated. The fields presented by my Registrar didn&rsquo;t exactly match the names provided by Cloudflare.<br>For the &ldquo;Algorithm&rdquo; Cloudflare only listed <code>13</code>, but my registrar had <code>13. ECDSA Curve P-256 with SHA-256</code>. This was one of 13 different options, all similarly specific. e.g. <code>2. Diffie-Hellman</code> or <code>3. DSA/SHA1</code>. I figured it out pretty quick but I had to check the Cloudflare help to confirm I was picking the correct option.<br>The other &ldquo;mismatch&rdquo; was Cloudflare listed &ldquo;Digest Type&rdquo;, but my Registrar had &ldquo;Digest Algorithm&rdquo;. This one was easier to figure out because there were only 4 options presented by my Registrar.<br>Little things like this can make it harder to setup, I&rsquo;m pretty familiar with the cipher algorithm options - I was doing a lot of PKI stuff earlier this year and late last year - so this isn&rsquo;t foreign to me, but I can see this being a stumbling block for other people. It would be a lot of documentation writing to map out all the possible field names from all the different Domain Registrars and DNS Hosters, so I can see gaps like this existing for a while. It would be nice if the industry decided to agree on what to call these details - and probably there are recommendations to that affect in the relevant RFCs, but because this was so easy for me, I didn&rsquo;t have to go read them.</p><h2 class=h6 id=testing><a class="text-body text-decoration-none" href=#testing>Testing</a></h2><p>Once I got all the values from Cloudflare into my Registrar, I need to confirm that this has done&mldr; something.</p><p>So I went to <a href=https://dnsviz.net rel=external>DNSViz</a>
and put in my website URL, and was presented a nice hierarchical graph of the domain tree with a lot of detail.<br>Another nice tool is <a href=https://dnssec-analyzer.verisignlabs.com rel=external>DNSSEC-Analyzer</a>
from Verisign Labs. It presents the hierarchy as well, but in boxes, with all the various checks (either Green, Yellow, or Red)</p><h2 class=h6 id=summary><a class="text-body text-decoration-none" href=#summary>Summary</a></h2><p>This was actually very simple for me to setup, because both my DNS Hoster and Domain Registrar support it and support common algorithms. It did take a small amount of poking around, but was still so easy I should have done it ages ago.</p><p>Do you have a Domain? Have you setup DNSSEC? How did you find the process?</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2019-10-17:/blog/dnssec/</guid>
                    

                    
                        <link>http://localhost:1313/blog/dnssec/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/dnssec/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Thu, 17 Oct 2019 19:24:10 PDT</pubDate>
                    

                    
                        <title>DNSSEC</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h5 id=view-from-the-client><a class="text-body text-decoration-none" href=#view-from-the-client>View from the client</a></h2><p>A client system - phone, dekstop, laptop, server - looking to find an IP address for a name, lets use <a href=https://www.clintmcguire.com rel=external>www.clintmcguire.com</a>
as an example, sends a DNS request to its configured name resolvers.<br>Name resolvers are either statically assigned by a network administrator or handed out by DHCP.</p><p>The client sends a request - typically via UDP - on port 53, to the name resolver. This is a question, asking for the Resource Record (RR) details that match a name/domain name.</p><p>The name resolver will - eventually, ideally - return the data to the client.</p><h2 class=h5 id=how-does-the-name-resolver-get-the-answer-to-provide-to-the-client><a class="text-body text-decoration-none" href=#how-does-the-name-resolver-get-the-answer-to-provide-to-the-client>How does the name resolver get the answer to provide to the client</a></h2><p>The name resolver will first check its cache to see if it has recently answered this request. There are three possible outcomes from this.</p><ol><li>It does not have the answer.</li><li>It has the answer, but the cache time limit has expired - so the answer is no longer good.</li><li>It has the answer and the cache time limit has not expired - so the answer is still good.</li></ol><p>In the case of #3, the name resolver will respond to the client with the answer from the cache.<br>In the case of #1 or 2, the name resolver will have to find the answer for the client.</p><p>Lets go back to our example - <a href=https://www.clintmcguire.com rel=external>www.clintmcguire.com</a>
- this name requires an RR to lookup. If you are using a web browser to go this site, the request will contain either an <code>A</code> record or an <code>AAAA</code> (Quad-A) record.</p><h3 class=h6 id=resource-record-aside><a class="text-body text-decoration-none" href=#resource-record-aside>Resource Record Aside</a></h3><p>There are many types of RRs, here is a quick list - that is not definitive</p><ul><li><code>A</code> - IPv4 address for a name</li><li><code>AAAA</code> - IPv6 address for a name</li><li><code>CNAME</code> - Alias for a name</li><li><code>TXT</code> - Text string, used by a bunch of things, like SFP to assist with mail filtering</li><li><code>MX</code> - Mail Server for the domain</li><li><code>PTR</code> - Pointer, for looking up a name from an IP address</li></ul><p>If you are interested in seeing a better list, check out: <a href=http://www.zytrax.com/books/dns/ch8/#types rel=external>http://www.zytrax.com/books/dns/ch8/#types</a></p><h2 class=h5 id=back-to-how-does-the-name-resolver-get-the-answer-to-provide-to-the-client><a class="text-body text-decoration-none" href=#back-to-how-does-the-name-resolver-get-the-answer-to-provide-to-the-client>Back to how does the name resolver get the answer to provide to the client</a></h2><p>With an RR type and domain or host name, the name resolver will start a search against the Root domain servers, looking for - in our example - the name servers for the .com domain.<br>It will then ask the .com servers for the name server for clintmcguire.com.<br>It will then ask the clintmcguire.com name servers for the A or AAAA record for <a href=https://www.clintmcguire.com rel=external>www.clintmcguire.com</a>
.
Once it gets this answer it will reply to the client with the details.</p><p>This process descbribes a Recursive Query - where the name resolver does the leg work of tracking down the answer.<br>An alternate process would be an Iterative Query, the process is the similar.</p><h2 class=h5 id=how-does-an-interaive-query-work><a class="text-body text-decoration-none" href=#how-does-an-interaive-query-work>How does an Interaive Query work</a></h2><p>When a name server performs an Iterative Query, it responds to the client with the closest match it has, and leaves tracking down the answer to the client.<br>So asking for <a href=https://www.clintmcguire.com rel=external>www.clintmcguire.com</a>
, a resolver might reply back with the .com name servers and a &ldquo;Good luck!&rdquo;, so the client then asks the .com servers for the name servers for clintmcguire.com. And so on.<br>The end result will be the same.</p><h2 class=h5 id=a-bit-more-on-the-technical-side><a class="text-body text-decoration-none" href=#a-bit-more-on-the-technical-side>A bit more on the technical side</a></h2><p>Currently, DNS traffic is sent to UDP port 53 on the server. The protocol allows for traffic to be sent via TCP, also on port 53, but because of the additional overhead of the TCP communications, UDP is preferred.<br>Unfortunately, this traffic is sent in the clear, so anyone that can see your network traffic can read your DNS queries. Additionally, this traffic is susceptible to manipulation - via Man in the Middle Attack.</p><p>There are a two different approaches to securing this traffic being experimented with - DNS over HTTPS (DoH) and DNS over TLS (DoT).<br>DoH is supported in Firefox, with some configuration.<br>There is criticism to both of these approaches, so it is still unclear what the final verdict will be.<br>In the mean time you can test it out for yourself if you want to dig into this more.</p><p>Also, DNS, as generally implemented, does not provide any data integrity, authenticaiton of data or have a way to assert a record does not exist. A solution to this is DNSSEC - DNS Security Extensions. DNSSEC addresses these shortcomings by signing responses with a certificate. This doesn&rsquo;t encrypt the data being sent, it just allows the client to confirm that the data is true, by comparing the signed result with the certificate that has been published as part of the zone details. The original DNSSEC RFCs were published in 2005 but DNSSEC has not yet seen widespread adoption. However, I&rsquo;ve been hearing more about it recenlty, as interest in &ldquo;securing all the things&rdquo; seems to be picking up. Hopefully this will start to gain wider adoption.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2019-10-16:/blog/how-dns-really-works/</guid>
                    

                    
                        <link>http://localhost:1313/blog/how-dns-really-works/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/how-dns-really-works/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Wed, 16 Oct 2019 19:01:53 PDT</pubDate>
                    

                    
                        <title>How DNS Really Works</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=dns-analogy><a class="text-body text-decoration-none" href=#dns-analogy>DNS Analogy</a></h2><p>The analogy typically used to explain what DNS does is to compare it to a Phone Book.
Which isn&rsquo;t a great analogy, when you look at how DNS works.</p><p>I think I have a better analogy. The downside of my proposed analogy, is that it requires some additional explaining - although I suspect people coming out of school today aren&rsquo;t very familiar with phone books anymore either&mldr;</p><p>Here is my suggestion for a better analogy&mldr;</p><p>Canada&rsquo;s Postal Code System.</p><p>Allow me to elaborate.</p><p>In Canada, we address our like so:<br>RECIPIENT NAME<br>STREET ADDRESS<br>CITY, PROVINCE<br>POSTAL CODE</p><p>A postal code is a 6 character alpha numeric code, with a space between the thrid and fourth characters. They always start with a letter, and they alternate letter and number.</p><p>For example, Vancouver City Hall&rsquo;s Postal Code is<br>V5Y 1V4</p><p>Let&rsquo;s break down postal codes, and see why this is a better analogy for the DNS system.</p><p>Postal Codes are used to sort mail - all the Postal Codes in BC start with V. All of the Postal Codes in Ontario start with P. (Quick Canadian Geography aside, BC and Ontario are Provinces, they are generally equivalent to US States, if that is relevant. Also BC is 364,764 sq mi, Texas is only 268,597 sq mi.)
This first letter tells the mail sorting system what large geographic section of the country to route the mail to.<br>The first three characters - V5Y in our example - represent a section of the city. Cities over a certain population will have many different valid combinations for the first three characters. From maps I&rsquo;ve looked at, Vancouver has around 29 different codes for the first three characters.</p><p>The last three characters of the postal code - 1V4 - represent a specific address or a range of addresses.
In the case of city hall, it is likley a specific address.</p><p>How does this make for a better analogy? I&rsquo;m glad you asked.</p><p>DNS is a hierachical system, with searches (assuming results aren&rsquo;t cached) starting from the right of the name and working to the left.
Using <a href=https://www.clintmcguire.com rel=external>www.clintmcguire.com</a>
as our example, we start our lookup by asking the Root DNS servers (represented by a &ldquo;hidden&rdquo; &lsquo;.&rsquo; at the end of the name) about what servers to ask to get information about the .com part of the name. One of the Root servers will return some options for .com DNS servers.<br>Our query then goes to the .com DNS servers and asks about clintmcguire.com.<br>A .com DNS server will respond with clintmcguire.com&rsquo;s DNS servers.<br>The process is repeated looking for the server called www, by asking clintmcguire.com&rsquo;s DNS servers for the answer.</p><p>Stated another way, we are refining a search by asking each level of a hierarchy for more specific information, until we get the specific answer we need - moving from most broad to most specific.</p><p>And that is why a Postal Code is a better analogy than a Phone Book. With a Phone Book you make an alphabetical search based on a name (white pages) or an alphabetical search based on name in a business category (yellow pages). The end result is a phone number to contact a person/business - which is basically what DNS does, but it doesn&rsquo;t convey the method of the search accurately.
DNS is actually starting with a very broad search scope and narrowing down the search space as it moves from one level down to the next. In the end you get an IP to communicate with, which in IPv4 kinda sorta looks like a phone number, if you squint hard enough. But IPv6 is coming soon (any day now, I&rsquo;ll just sit here waiting for it, yup, just a little bit longer&mldr;) and no one would confuse an IPv6 address for a phone number. It&rsquo;s unlikely they would confuse it with a Postal Code, either, but they both use numbers AND letters, so that should also count for something.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2019-10-15:/blog/how-dns-works/</guid>
                    

                    
                        <link>http://localhost:1313/blog/how-dns-works/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/how-dns-works/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Tue, 15 Oct 2019 21:32:04 PDT</pubDate>
                    

                    
                        <title>How DNS Works</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h2 class=h6 id=time-in-windows---for-domains><a class="text-body text-decoration-none" href=#time-in-windows---for-domains>Time in Windows - for Domains</a></h2><p>In a Windows Domain, the default config is for the PDC to get time from an external time source, the other DCs to get time from the PDC and the domain members to get time for a DC in their Site.</p><p>So only the PDC should need to be modified.</p><p>The commands to configure the PDC to get time from the NTP Pool servers:</p><pre tabindex=0><code>w32tm /config /manualpeerlist:&#34;0.north-america.pool.ntp.org,0x09 1.north-america.pool.ntp.org,0x09 2.north-america.pool.ntp.org,0x09 3.north-america.pool.ntp.org,0x09&#34; /syncfromflags:manual /reliable:yes /update
Net Stop &#34;Windows Time&#34;
Net Start &#34;Windows Time&#34;
w32tm /resync</code></pre><p>Note on the manualpeerlist - after each server name we are adding <code>,0x09</code> because we want to combine the options <code>0x01</code> and <code>0x08</code> - you can look those values up here: <a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc773263%28v=ws.10%29#registry-path-25" rel=external>https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc773263(v=ws.10)#registry-path-25</a></p><p>If you want to use different servers for peers go to the NTP Pool Project website and select the servers that match your needs.
(Don&rsquo;t forget to put double quotes around your server list and spaces between server names!)</p><p>You can run the above commands on a non-domain joined computer and get the same result.</p><p>If you have a domain joined computer that needs to have the NTP settings reset - so it will check with a DC - use the following commands:</p><pre tabindex=0><code>w32tm /config /syncfromflags:domhier /update
Net Stop w32tm
Net Start w32tm</code></pre><p>One last thing about w32tm - it is not designed to provide highly accurate time, for time sensitive apps. If you have time sensitive apps you will need to find an alternate time server.</p><p>Reference:<br>This article is a good refernce on w32tm: <a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc773013%28v=ws.10%29" rel=external>https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc773013(v=ws.10)</a><br>Configure w32tm on PDC: Microsoft Technet<br>Configure w32tm on computers: Microsoft Technet</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2019-09-07:/blog/ntp/</guid>
                    

                    
                        <link>http://localhost:1313/blog/ntp/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/ntp/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sat, 07 Sep 2019 10:27:41 PDT</pubDate>
                    

                    
                        <title>NTP</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>Following up on my post about <a href=http://www.clintmcguire.com/blog/find-az-images-by-publisher/ rel=external>finding Azure Images by Publisher</a>
, here is how to get all the SKUs for the specific Offers.</p><p>Get-AzVMImageSKu is the command to run.</p><p>It requires Location, Publisher, and Offer.</p><p>For example:
Get-AzVMImageSku -Location &rsquo;eastus&rsquo; -publisher &lsquo;fortinet&rsquo; -Offer &lsquo;fortinet_fortigate-vm_v5&rsquo;</p><p>This will return the two SKUs - &ldquo;fortinet_fg-vm&rdquo; and &ldquo;fortinet_fg-vm_payg&rdquo;</p><p>You can take the SKUs and use those to deploy new VMs.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2019-02-23:/blog/find-az-offers/</guid>
                    

                    
                        <link>http://localhost:1313/blog/find-az-offers/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/find-az-offers/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sat, 23 Feb 2019 17:56:25 PST</pubDate>
                    

                    
                        <title>Find Azure Market Place Image Offers from PowerShell</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>First install the PowerShell Az Module.</p><p>On Windows, open an elevated PowerShell window and run: Install-Module -Name Az -AllowClobber</p><p>On MacOS, use sudo to open pwsh, then run: Install-Module -Name Az -AllowClobber</p><p>Once the Az module is installed, exit the elevated/sudo PowerShell session and open a regular PowerShell session.</p><p>Connect to your Azure account - Connect-AzAccount and use the device login URL and Code to sign in.</p><p>If you don&rsquo;t know the exact Publisher Name, you can find it by looking at all the Publishers.</p><p>Use Get-AzVMImagePublisher -Location &lsquo;LocationName&rsquo; to get a full list of the Publishers that have Images in that Location.</p><p>Use Get-AzVMImagePublisher -Location &lsquo;LocationName&rsquo; | where -Property PublisherName -match &ldquo;string with *" to narrow down the list.</p><p>Match will work with the * wildcard, in my testing this returned more matches than I was expecting. (I should point out I was using PowerShell 6.1, in case that makes a difference.)</p><p>LocationName can be &rsquo;eastus&rsquo; or &lsquo;westus&rsquo;, etc. It will also accept &rsquo;east us&rsquo;, in my testing.</p><p>When you have the Publisher Name you can get the list of all their VM Images by using: Get-AzVMImageOffer -Location &lsquo;LocationName&rsquo; -PublisherName &lsquo;PublisherName&rsquo;</p><p>This will return the Offer and Id, in addition to the PublisherName and Location.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2019-02-17:/blog/find-az-images-by-publisher/</guid>
                    

                    
                        <link>http://localhost:1313/blog/find-az-images-by-publisher/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/find-az-images-by-publisher/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sun, 17 Feb 2019 14:18:16 PST</pubDate>
                    

                    
                        <title>Find Azure Images by Publisher</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>Once you&rsquo;ve downloaded the file use <code>Get-FileHash</code> to calculate the SHA256 hash.<br><code>$hash = (Get-FileHash .\filename.exe).hash</code></p><p>Copy the hash value from the website and assign it to a variable to compare.<br><code>$webhash = "3...f'</code><br>[Paste the full SHA256 hash in the quotes]</p><p>Then use PowerShell to compare this to the published hash.<br><code>if ($hash -eq $webhash){$true}</code></p><p>This will return either &ldquo;True&rdquo; or nothing, if &ldquo;True&rdquo; then the hashes match.</p><p>Or if you want to do it in one line:<br><code>If ((Get-FileHash .\filename.exe).hash -eq "3..f"){$True}</code><br>[Published SHA256 goes in the quotes.]</p><h2 class=h5 id=algorithms><a class="text-body text-decoration-none" href=#algorithms>Algorithms</a></h2><p>The default hashing algorithm used is SHA256 (SHA version 2, 256 bit hash).<br><code>Get-FileHash</code> supports the following algorithms</p><ul><li>SHA1</li><li>SHA256</li><li>SHA384</li><li>SHA512</li><li>MD5</li></ul><p>To use a different algorithm, use the <code>-Algorithm</code> parameter to pass the desired option.<br>I&rsquo;ve listed the algorithms here in the format accepted by PowerShell.</p><p>Here is the oneliner with SHA1 for the algorithm:<br><code>If ((Get-FileHash .\filename.exe -Algorithm SHA1).hash -eq "3..f"){$True}</code></p><h3 class=h6 id=quick-reminder><a class="text-body text-decoration-none" href=#quick-reminder>Quick reminder</a></h3><p>MD5 and SHA1 are no longer considered secure, so where possible avoide them, in favour of the stronger SHA 2 options.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2017-09-05:/blog/compare_file_hash_with_powershell/</guid>
                    

                    
                        <link>http://localhost:1313/blog/compare_file_hash_with_powershell/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/compare_file_hash_with_powershell/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Tue, 05 Sep 2017 00:00:00 UTC</pubDate>
                    

                    
                        <title>Compare file hash with PowerShell</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>I was looking into an certificate issue a client was having with their web proxy and in testing I thought it might be helpful to resolve the DNS names for all the open connections on ports 80 and 443.</p><p>A quick netstat -anop tcp shows too many connections to bother doing manually and scraping the output with PowerShell would be possible, but isn&rsquo;t my first choice.</p><p>Thankfully Get-NetTCPConnections will show very similar details to the netstat above, so I started there.</p><p>Lets start by getting all the connections that are using TLS:
$443 = Get-NetTCPConnection | where remotePort -eq 443 Then we pass $443 to Resolve-DNS like so:
foreach ($socket in $443){Resolve-DnsName -name $socket.remoteaddress}
This will use reverse DNS look up to resolve the names and will display them neatly.</p><p>To do this with HTTP, simply change all occurrences of 443, above, with 80.</p><p>This wasn&rsquo;t as helpful as I was hoping, since all the entries resolved to AWS, but it was something I thought I might end up using again&mldr;</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2017-08-29:/blog/resolve_all_remote_hosts_that_you_are_connected/</guid>
                    

                    
                        <link>http://localhost:1313/blog/resolve_all_remote_hosts_that_you_are_connected/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/resolve_all_remote_hosts_that_you_are_connected/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Tue, 29 Aug 2017 00:00:00 UTC</pubDate>
                    

                    
                        <title>Resolve all Remote Hosts that you are Connected</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>I have a utility server that I connect to frequently and for some reason or other, that I haven&rsquo;t had time to investigate yet, a certain Citrix related process launches and re-launches.
Over the course of weeks there can be 30+ instances of this process running under my user account.</p><p>The specific process doesn&rsquo;t take up much CPU or RAM, but it is annoying and if I someone else is using the server for real work, then those resources could be better allocated.</p><p>Task Manager takes too much clicking around to clean them all up, so I do a quick kick with PowerShell.
In an Elevated PowerShell session:
Get-Process | Where {$_.ProcessName -like &ldquo;SelfServicePlugin&rdquo;} | Stop-Process</p><p>You can change out SelfServicePlugin for anything else you need.
I suggest testing before you run this somewhere important. A simple test is:
Get-Process | Where {$_.ProcessName -like &ldquo;SelfServicePlugin&rdquo;} | Stop-Process -WhatIf
Then you can quickly compare the PIDs with Task Manager.</p><p>Caveat Emptor: This will stop all process that match the name you provide. If another user has the same process running for them, it will get stopped too.
You can use the Property SessionID to filter for processes running under a certain login, but I will leave figuring that out as an activity for the curious.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2017-08-22:/blog/stop_all_processes_with_the_same_name/</guid>
                    

                    
                        <link>http://localhost:1313/blog/stop_all_processes_with_the_same_name/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/stop_all_processes_with_the_same_name/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Tue, 22 Aug 2017 00:00:00 UTC</pubDate>
                    

                    
                        <title>Stop all processes with the same name</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>Notes from RHEL 7 Partner Training&mldr;</p><p>You can access Red Hat Support via the CLI tool redhat-support-tool
The tool gives you access to the KB, which you can search from the CLI and you can work with support tickets.</p><p>Running sosreport will create an archive file with logs and other info that can be attached to a ticket.</p><p>redhat-support-tool has options for attaching files, it will look for an sosreport when you first open the ticket.</p><p>RHEL 7 has symbolic links for 4 folders in / to the same folder in /usr.
They are:</p><pre><code>/bin links to /usr/bin
/sbin links to /usr/sbin
/lib links to /usr/lib
/lib64 links to /usr/lib64
</code></pre><p>cp -r is required for copying folders;-r is for recursive.</p><p>mkdir -p creates parent directories as well.</p><p>rmdir for removing empty directories, but rm -rf for folders with contents.</p><p>Hard links are limited to being in the same file system; soft links/symbolic links can cross file systems.</p><p>New user accounts automatically have a Primary Group with the same name as the username. The Primary Group owns the files created by the user.</p><p>PolicyKit is similar to UAC in Windows. It is for GUI based apps and maintains its own configuration (independent of sudo) for what users/groups are permitted to elevate their privileges.</p><p>SU options:</p><pre><code>    add &lt;code&gt;-&lt;/code&gt; to start with a clean environment
    add &lt;code&gt;-c&lt;/code&gt; to run a single command
</code></pre><p>Commands run via sudo are logged to /var/log/secure</p><p>userdel -r deletes the user from /etc/passwd and deletes their home directory.</p><p>Deleting a user frees up the UID, which could be re-assigned to a new user. Files owned by a UID that has been assigned to a new user keep their ownership, meaning they are now owned by a new user. This may have unintended consequences.</p><p>To find unowned files run this command as root:
find / -nouser -o -nogroup 2> /dev/null</p><p>Passwords for users are stored in /etc/shadow
They are stored salted and hashed.
Hashing algorithm defaults to SHA-512 - this can be changed - via authconfig &ndash;passalgo - but it can only be lowered to MD5 or SHA-256, so probably not a good idea. (More bits == better!)</p><p>Passwords are processed by adding the salt to the user provided password and re-encrypted. If the value of this process matches the stored (hashed & salted) password, then the user has provided the correct password.
Each user has a randomly generated salt. I assume this is picked at user creation time, but could be updated when the password is changed.
Unique salts prevents identical values for hashed passwords.</p><p>Password aging and expiry is controlled with chage.
Account locking is controlled with usermod -L</p><p>Users can be assigned the &ldquo;nologin&rdquo; shell. This will prevent shell connections, but still allows the user to have an account. Example provided includes a mail user, where access to email is controlled via local account, but the user does not access their email from a shell session.
nologon shell is /sbin/nologin</p><p>sssd package provides LDAP client software dependencies.
krb5-workstation package is useful for debuging kerberos issues and can work with kerberos tickets from the CLI.</p><p>IPA can be used to control sudo, ssh public keys, ssh host keys, server certs, automounter maps.
IPA server provides LDAP and Kerberos.
IPA can create and manage domains.</p><p>samba-winbind can be installed so the computer can join an AD Domain, authconfig can be used to configure winbind.</p><p>realmd package can be used to join an AD Domain and configure which users are allowed to login to the Red Hat computer.</p><p>Users need to login with their fully qualified name, eg:
IPA = <a href=mailto:user1@ipa.example.com rel=external>user1@ipa.example.com</a>
AD = DOMAIN\user1</p><p>Red Hat has an IPA guide here: <a href=https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html-single/Identity_Management_Guide/index.html rel=external>https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html-single/Identity_Management_Guide/index.html</a>
But from a quick scan I don&rsquo;t know what IPA stands for.</p><p>File Permissions
Changing Group ownership of a file or directory - use : before the group name.
chown :newgroup dirname</p><p>Changing User and Group ownership of a file or directory - declare as user:group.
chown newuser:newgroup dirname</p><p>Restrictions:
Only root can the user that owns a file.
root or the current owner can change the group that owns the file, but current (non-root) user can only change the group to one that the user is a member of.</p><p>chgrp can also be used to change group ownership; chgrp works like chown, including -R for recursive.</p><p>Special Permissions for Files
setuid permissions allow a file to be executed as the user that owns the file, instead of the user that calls the file.
setgid permissions allow a file to be executed as the group that owns the file.
When looking the the file properties (ls -l) you will see a S or an s.
The capital S means there are no execute permissions on the file, whereas the small s means that there are execute permissions.</p><p>setuid permissions can be set using chmod u+s filename or chmod 4700 filename and setgid permissions can be set using chmod g+s filename or chmod 2700 filename.</p><p><em>Special Permissions for Directories</em>
<em>When the sticky bit is enabled on a directory, it restricts who can delete files. Only root, the owner of the file or the owner of the directory that the file is in can delete the file contents.</em>
<em>sticky bit is displayed as a t at the end of the permissions for a directory. (ls -ld will show something like: drwxrwxrwt)</em>
<em>The sticky bit is set via:</em>
<em>chmod a+t directoryname or chmod 1777 directoryname</em></p><p>Shared folders can be configured with setgid so that the files created in these folders inherit the group owner value that is assigned to the directory, instead of the defualt behaviour, which is to have the primary group of the user that creates the file.
chmod g+s directoryname
Directory permissions will show an S or an s where the x should be.
Capital S for no execute bit on the folder.</p><h2 class=h6 id=selinux><a class="text-body text-decoration-none" href=#selinux>SELinux</a></h2><p>SELinux adds an additional layer of object-oriented security to Linux.
Provides sophisticated security rules for defining access.</p><p>To check SELinux mode run getenforce
To check for SELinux contexts on files/folders use ls -Z
To display SELinux booleans run getsebool -a</p><p>Modes are to determine how rules are enacted - Enforcing, Permissive, Disabled.
Changing between Enforcing and Permissive does not require a reboot.
Changing to Disabled does require a reboot - using Permissive instead of Disabled is recommended.</p><h2 class=h6 id=process-management><a class="text-body text-decoration-none" href=#process-management>Process Management</a></h2><p>Processes can be managed for the current user or another user with Signals.
Signals tell the process what action to take - Stop, Terminate, Kill, Core Dump, Resume&mldr;
Signals can be initiated with keyboard shortcuts or by calling the short name for the signal.
Users can Kill processes they own, but root is required to kill processes owned by other users.</p><p>Suspend (STOP) is initiated with Crtl-Z
Kill is intiated with Crtl-C
Core Dump is initiated with Crtl-&lt;/code></p><p>Use kill command to send any signal
Use killall to kill processes in groups, either by matching name, owned by user or all system processes.
Use pkill to kill processes with even more granular control.</p><p>Use terminate option first, since it allows for clean up. Kill is final and doesn&rsquo;t allow for clean up, should only be used if the process does not respond.</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2017-07-05:/blog/redhat_enterprise_linux_training_notes/</guid>
                    

                    
                        <link>http://localhost:1313/blog/redhat_enterprise_linux_training_notes/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/redhat_enterprise_linux_training_notes/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Wed, 05 Jul 2017 00:00:00 UTC</pubDate>
                    

                    
                        <title>Red Hat Enterprise Linux Training - Notes</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<p>To quickly test if you can communicate with a server on a specific port use this command:
Test-NetConnection (hostname/ip) -Port (tcp port number)
You are looking for TcpTestSucceeded : True in the output.</p><p>Example:
PS C:\Users\Clint> Test-NetConnection <a href=https://www.google.com rel=external>www.google.com</a>
-port 80</p><p>ComputerName : <a href=https://www.google.com rel=external>www.google.com</a>
RemoteAddress : 74.125.28.103
RemotePort : 80
InterfaceAlias : vEthernet (LAN) 2
SourceAddress : 192.168.0.5
TcpTestSucceeded : True</p><p>This command is quite flexible, you can also have it test with ICMP like PING and Trace Route.</p><p>For a simple ping test: Test-NetConnection <a href=https://www.google.com rel=external>www.google.com</a>
For a trace route test: Test-NetConnection <a href=https://www.google.com rel=external>www.google.com</a>
-TraceRoute</p><p>Does not appear to support UDP test, in PowerShell 5&mldr;</p><h2 class=h6 id=update><a class="text-body text-decoration-none" href=#update>Update:</a></h2><p>This command doesn&rsquo;t appear to be in PowerShell Core/PowerShell 6. However, Test-Connection is.
It has some different options, I haven&rsquo;t read all of them, but it appears to be more flexible, however, to get the same result as above run:
Test-Connection <a href=https://www.googgle.com rel=external>www.googgle.com</a>
-TCPPort 80</p><p>When you check a specific port, it will return a True or False - in my testing it performs this check quickly</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2017-06-13:/blog/use_powershell_to_test_connection_to_a_port/</guid>
                    

                    
                        <link>http://localhost:1313/blog/use_powershell_to_test_connection_to_a_port/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/use_powershell_to_test_connection_to_a_port/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Tue, 13 Jun 2017 00:00:00 UTC</pubDate>
                    

                    
                        <title>Use PowerShell to test connection to a port</title>
                    
                </item>
            
        
            
                <item>
                    
                    
                    
                    
                    
                    
                    

                    

                    

                    

                    

                    
                    
                    

                    

                    
                        <description><![CDATA[<h1 class=h6 id=update><a class="text-body text-decoration-none" href=#update>Update</a></h1><p>I&rsquo;ve posted an updated version of this script in a new section of my blog. Because all the comments below relate to the original version of the script I&rsquo;m going to leave that version posted here. You can find the new version of the script here.</p><p>I wrote a script to get the last time each computer logged into the domain.</p><p>This script is very similar to my script that gets user last logon times, which you can find here.</p><p>This script requires the Quest AD Cmdlets, which you can download here. (Check the box agreeing to the terms to see the download options.)</p>]]></description>
                    

                    
                        <guid isPermaLink="false">tag:localhost:1313,2011-05-29:/blog/powershell_script_to_get_all_computers_last_logon_time/</guid>
                    

                    
                        <link>http://localhost:1313/blog/powershell_script_to_get_all_computers_last_logon_time/</link>
                    

                    
                        

                        

                        <atom:link href="http://localhost:1313/blog/powershell_script_to_get_all_computers_last_logon_time/" hreflang="en-us" rel="alternate" type="text/html"/>
                    

                    

                    
                        <pubDate>Sun, 29 May 2011 00:00:00 UTC</pubDate>
                    

                    
                        <title>Powershell script to get all computers last logon time</title>
                    
                </item>
            
        
    </channel>
</rss>
